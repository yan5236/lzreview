{
  "version": 3,
  "sources": ["../src/web/embed.js", "../src/database/db.js", "../src/utils/validation.js", "../src/utils/security.js", "../src/utils/response.js", "../src/handlers/comments.js", "../src/handlers/whitelist.js", "../src/index.js"],
  "sourceRoot": "dist",
  "sourcesContent": ["const embedScript = `\n(function() {\n  'use strict';\n\n  // \u5934\u50CF\u5DE5\u5177\u51FD\u6570\n  function getQQAvatar(qq) {\n    if (!qq || !/^\\\\d+$/.test(qq)) {\n      return null;\n    }\n    return \\`https://q1.qlogo.cn/g?b=qq&nk=\\${qq}&s=100\\`;\n  }\n\n  function getGitHubStyleAvatar(seed) {\n    const hash = simpleHash(seed || 'anonymous');\n    return \\`https://api.dicebear.com/7.x/pixel-art/svg?seed=\\${hash}&size=100\\`;\n  }\n\n  function simpleHash(str) {\n    let hash = 0;\n    if (str.length === 0) return hash;\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return Math.abs(hash).toString();\n  }\n\n  function getAvatarUrl(authorName, authorEmail, authorQQ) {\n    if (authorQQ) {\n      const qqAvatar = getQQAvatar(authorQQ);\n      if (qqAvatar) {\n        return qqAvatar;\n      }\n    }\n    const seed = authorEmail || authorName || 'anonymous';\n    return getGitHubStyleAvatar(seed);\n  }\n\n  function preloadAvatar(url, fallbackUrl = null) {\n    return new Promise((resolve) => {\n      const img = new Image();\n      img.onload = () => resolve(url);\n      img.onerror = () => {\n        if (fallbackUrl) {\n          const fallbackImg = new Image();\n          fallbackImg.onload = () => resolve(fallbackUrl);\n          fallbackImg.onerror = () => resolve(null);\n          fallbackImg.src = fallbackUrl;\n        } else {\n          resolve(null);\n        }\n      };\n      img.src = url;\n    });\n  }\n\n  // \u9ED8\u8BA4\u914D\u7F6E\n  const defaultConfig = {\n    apiUrl: '{{API_URL}}',\n    pageUrl: window.location.href,\n    placeholder: '\u8BF4\u70B9\u4EC0\u4E48\u5427...',\n    maxLength: 1000,\n    requireName: true,\n    requireEmail: false\n  };\n\n  // \u5408\u5E76\u7528\u6237\u914D\u7F6E\n  const config = Object.assign({}, defaultConfig, window.lzreviewConfig || {});\n\n  // \u8BC4\u8BBA\u7CFB\u7EDF\u7C7B\n  class LzReview {\n    constructor(config) {\n      this.config = config;\n      this.container = document.getElementById('lzreview-comments');\n      this.comments = [];\n      this.csrfToken = null;\n      \n      if (!this.container) {\n        console.error('lzreview: \u627E\u4E0D\u5230\u5BB9\u5668\u5143\u7D20 #lzreview-comments');\n        return;\n      }\n\n      this.init();\n    }\n\n    async init() {\n      this.injectStyles();\n      await this.loadCSRFToken();\n      await this.loadComments();\n      this.render();\n    }\n\n    injectStyles() {\n      if (document.getElementById('lzreview-styles')) return;\n\n      const styles = \\`\n        .lzreview-container {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n          max-width: 100%;\n          margin: 0;\n          color: #333;\n          line-height: 1.6;\n        }\n        .lzreview-form {\n          background: #f9f9f9;\n          padding: 20px;\n          border-radius: 8px;\n          margin-bottom: 30px;\n          border: 1px solid #e1e5e9;\n        }\n        .lzreview-form-row {\n          display: flex;\n          gap: 15px;\n          margin-bottom: 15px;\n        }\n        .lzreview-form-group {\n          flex: 1;\n        }\n        .lzreview-label {\n          display: block;\n          margin-bottom: 5px;\n          font-weight: 500;\n          color: #555;\n        }\n        .lzreview-input, .lzreview-textarea {\n          width: 100%;\n          padding: 10px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          font-size: 14px;\n          font-family: inherit;\n          box-sizing: border-box;\n        }\n        .lzreview-textarea {\n          min-height: 100px;\n          max-height: 200px;\n          height: 100px;\n          resize: none;\n        }\n        .lzreview-button {\n          background: #007cba;\n          color: white;\n          padding: 10px 20px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n        }\n        .lzreview-button:hover { background: #005a87; }\n        .lzreview-button:disabled {\n          background: #ccc;\n          cursor: not-allowed;\n        }\n        .lzreview-comments-list {\n          margin-top: 30px;\n        }\n        .lzreview-comment {\n          border-bottom: 1px solid #eee;\n          padding: 20px 0;\n        }\n        .lzreview-comment:last-child { border-bottom: none; }\n        .lzreview-comment-header {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 10px;\n          font-size: 14px;\n          color: #666;\n        }\n        .lzreview-comment-author {\n          font-weight: 500;\n          color: #333;\n        }\n        .lzreview-comment-email {\n          font-weight: 400;\n          color: #666;\n          font-size: 12px;\n        }\n        .lzreview-avatar-preview {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: 10px;\n        }\n        .lzreview-avatar-preview img {\n          width: 48px;\n          height: 48px;\n          border-radius: 50%;\n          border: 2px solid #ddd;\n          object-fit: cover;\n        }\n        .lzreview-comment-avatar {\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          border: 1px solid #ddd;\n          object-fit: cover;\n          margin-right: 10px;\n          flex-shrink: 0;\n        }\n        .lzreview-comment-header-with-avatar {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 10px;\n          font-size: 14px;\n          color: #666;\n        }\n        .lzreview-comment-author-info {\n          display: flex;\n          align-items: center;\n          flex: 1;\n        }\n        .lzreview-comment-actions {\n          margin-top: 8px;\n          margin-bottom: 10px;\n        }\n        .lzreview-reply-button {\n          background: transparent;\n          border: 1px solid #ddd;\n          color: #666;\n          padding: 4px 12px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n          transition: all 0.2s ease;\n        }\n        .lzreview-reply-button:hover {\n          background: #f5f5f5;\n          border-color: #007cba;\n          color: #007cba;\n        }\n        .lzreview-reply-form {\n          margin-top: 10px;\n          padding: 15px;\n          background: #f9f9f9;\n          border-radius: 6px;\n          border: 1px solid #e1e5e9;\n        }\n        .lzreview-reply-form .lzreview-textarea {\n          height: 80px;\n          margin-bottom: 10px;\n        }\n        .lzreview-reply-actions {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n        }\n        .lzreview-button-small {\n          padding: 6px 12px;\n          font-size: 12px;\n        }\n        .lzreview-button-cancel {\n          background: #6c757d;\n          color: white;\n          padding: 6px 12px;\n          font-size: 12px;\n        }\n        .lzreview-button-cancel:hover {\n          background: #5a6268;\n        }\n        .lzreview-comment-content {\n          margin-bottom: 10px;\n          white-space: pre-wrap;\n          word-wrap: break-word;\n        }\n        .lzreview-replies {\n          margin-left: 20px;\n          margin-top: 15px;\n          border-left: 3px solid #f0f0f0;\n          padding-left: 15px;\n        }\n        .lzreview-error {\n          background: #f8d7da;\n          color: #721c24;\n          padding: 10px;\n          border-radius: 4px;\n          margin-bottom: 15px;\n          border: 1px solid #f5c6cb;\n        }\n        .lzreview-success {\n          background: #d4edda;\n          color: #155724;\n          padding: 10px;\n          border-radius: 4px;\n          margin-bottom: 15px;\n          border: 1px solid #c3e6cb;\n        }\n        .lzreview-loading {\n          text-align: center;\n          padding: 20px;\n          color: #666;\n        }\n        .lzreview-char-count {\n          text-align: right;\n          font-size: 12px;\n          color: #666;\n          margin-top: 5px;\n        }\n        .lzreview-char-count.warning { color: #e74c3c; }\n        @media (max-width: 768px) {\n          .lzreview-form-row { flex-direction: column; }\n          .lzreview-replies { margin-left: 10px; padding-left: 10px; }\n        }\n      \\`;\n\n      const styleEl = document.createElement('style');\n      styleEl.id = 'lzreview-styles';\n      styleEl.textContent = styles;\n      document.head.appendChild(styleEl);\n    }\n\n    async loadCSRFToken() {\n      try {\n        const response = await fetch(\\`\\${this.config.apiUrl}/api/comments/csrf-token\\`);\n        const data = await response.json();\n        if (data.success) {\n          this.csrfToken = data.data.csrfToken;\n        }\n      } catch (error) {\n        console.error('\u52A0\u8F7DCSRF\u4EE4\u724C\u5931\u8D25:', error);\n      }\n    }\n\n    async loadComments() {\n      try {\n        const response = await fetch(\\`\\${this.config.apiUrl}/api/comments?page=\\${encodeURIComponent(this.config.pageUrl)}\\`);\n        const data = await response.json();\n        \n        if (data.success) {\n          this.comments = data.data.comments;\n        } else {\n          console.error('\u52A0\u8F7D\u8BC4\u8BBA\u5931\u8D25:', data.message);\n          // \u5982\u679C\u662F\u767D\u540D\u5355\u9650\u5236\uFF0C\u663E\u793A\u9519\u8BEF\u4FE1\u606F\n          if (response.status === 403) {\n            this.showWhitelistError(data.message);\n          }\n        }\n      } catch (error) {\n        console.error('\u52A0\u8F7D\u8BC4\u8BBA\u5931\u8D25:', error);\n      }\n    }\n\n    render() {\n      this.container.innerHTML = \\`\n        <div class=\"lzreview-container\">\n          <div class=\"lzreview-form\">\n            <h3 style=\"margin-top: 0;\">\u53D1\u8868\u8BC4\u8BBA</h3>\n            <div id=\"lzreview-message\"></div>\n            <form id=\"lzreview-comment-form\">\n              <div class=\"lzreview-form-row\">\n                <div class=\"lzreview-form-group\">\n                  <label class=\"lzreview-label\" for=\"author-name\">\u59D3\u540D *</label>\n                  <input type=\"text\" id=\"author-name\" class=\"lzreview-input\" required maxlength=\"50\">\n                </div>\n                <div class=\"lzreview-form-group\">\n                  <label class=\"lzreview-label\" for=\"author-email\">\u90AE\u7BB1\uFF08\u53EF\u9009\uFF09</label>\n                  <input type=\"email\" id=\"author-email\" class=\"lzreview-input\">\n                </div>\n              </div>\n              <div class=\"lzreview-form-row\">\n                <div class=\"lzreview-form-group\">\n                  <label class=\"lzreview-label\" for=\"author-qq\">QQ\u53F7\uFF08\u53EF\u9009\uFF09</label>\n                  <input type=\"text\" id=\"author-qq\" class=\"lzreview-input\" placeholder=\"\u586B\u5199QQ\u53F7\u5C06\u4F7F\u7528QQ\u5934\u50CF\">\n                </div>\n                <div class=\"lzreview-form-group\">\n                  <div class=\"lzreview-avatar-preview\">\n                    <img id=\"avatar-preview\" src=\"\" alt=\"\u5934\u50CF\u9884\u89C8\" style=\"display: none;\">\n                  </div>\n                </div>\n              </div>\n              <div class=\"lzreview-form-group\">\n                <label class=\"lzreview-label\" for=\"comment-content\">\u8BC4\u8BBA\u5185\u5BB9 *</label>\n                <textarea id=\"comment-content\" class=\"lzreview-textarea\" placeholder=\"\\${this.config.placeholder}\" required maxlength=\"\\${this.config.maxLength}\"></textarea>\n                <div class=\"lzreview-char-count\" id=\"char-count\">0/\\${this.config.maxLength}</div>\n              </div>\n              <button type=\"submit\" class=\"lzreview-button\" id=\"submit-button\">\u53D1\u5E03\u8BC4\u8BBA</button>\n            </form>\n          </div>\n          <div class=\"lzreview-comments-list\">\n            <h3>\u8BC4\u8BBA\u5217\u8868 (\\${this.comments.length})</h3>\n            <div id=\"comments-container\">\n              \\${this.comments.length > 0 ? this.renderComments(this.comments) : '<p style=\"color: #666; text-align: center; padding: 20px;\">\u6682\u65E0\u8BC4\u8BBA\uFF0C\u5FEB\u6765\u53D1\u8868\u7B2C\u4E00\u6761\u8BC4\u8BBA\u5427\uFF01</p>'}\n            </div>\n          </div>\n        </div>\n      \\`;\n\n      this.bindEvents();\n    }\n\n    renderComments(comments) {\n      return comments.map(comment => {\n        const avatarUrl = getAvatarUrl(comment.author_name, comment.author_email, comment.author_qq);\n        return \\`\n        <div class=\"lzreview-comment\">\n          <div class=\"lzreview-comment-header-with-avatar\">\n            <div class=\"lzreview-comment-author-info\">\n              <img class=\"lzreview-comment-avatar\" src=\"\\${avatarUrl}\" alt=\"\\${this.escapeHtml(comment.author_name)}\u7684\u5934\u50CF\">\n              <span class=\"lzreview-comment-author\">\n                \\${this.escapeHtml(comment.author_name)}\n                \\${comment.author_email ? \\`<span class=\"lzreview-comment-email\"> (\\${this.escapeHtml(comment.author_email)})</span>\\` : ''}\n              </span>\n            </div>\n            <span class=\"lzreview-comment-time\">\\${this.formatDate(comment.created_at)}</span>\n          </div>\n          <div class=\"lzreview-comment-content\">\\${this.escapeHtml(comment.content)}</div>\n          <div class=\"lzreview-comment-actions\">\n            <button class=\"lzreview-reply-button\" onclick=\"toggleReplyForm(\\${comment.id})\">\u56DE\u590D</button>\n          </div>\n          <div id=\"reply-form-\\${comment.id}\" class=\"lzreview-reply-form\" style=\"display: none;\">\n            <div class=\"lzreview-form-row\">\n              <div class=\"lzreview-form-group\">\n                <label class=\"lzreview-label\">\u59D3\u540D *</label>\n                <input type=\"text\" id=\"reply-author-name-\\${comment.id}\" class=\"lzreview-input\" required maxlength=\"50\" placeholder=\"\u8BF7\u8F93\u5165\u60A8\u7684\u59D3\u540D\">\n              </div>\n              <div class=\"lzreview-form-group\">\n                <label class=\"lzreview-label\">\u90AE\u7BB1\uFF08\u53EF\u9009\uFF09</label>\n                <input type=\"email\" id=\"reply-author-email-\\${comment.id}\" class=\"lzreview-input\" placeholder=\"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\">\n              </div>\n            </div>\n            <div class=\"lzreview-form-row\">\n              <div class=\"lzreview-form-group\">\n                <label class=\"lzreview-label\">QQ\u53F7\uFF08\u53EF\u9009\uFF09</label>\n                <input type=\"text\" id=\"reply-author-qq-\\${comment.id}\" class=\"lzreview-input\" placeholder=\"\u586B\u5199QQ\u53F7\u5C06\u4F7F\u7528QQ\u5934\u50CF\">\n              </div>\n            </div>\n            <textarea id=\"reply-content-\\${comment.id}\" class=\"lzreview-textarea\" placeholder=\"\u56DE\u590D \\${this.escapeHtml(comment.author_name)}...\" maxlength=\"\\${this.config.maxLength}\"></textarea>\n            <div class=\"lzreview-reply-actions\">\n              <button class=\"lzreview-button lzreview-button-small\" onclick=\"submitReply(\\${comment.id})\">\u53D1\u5E03\u56DE\u590D</button>\n              <button class=\"lzreview-button lzreview-button-cancel\" onclick=\"toggleReplyForm(\\${comment.id})\">\u53D6\u6D88</button>\n            </div>\n          </div>\n          \\${comment.replies && comment.replies.length > 0 ? \\`\n            <div class=\"lzreview-replies\">\n              \\${this.renderComments(comment.replies)}\n            </div>\n          \\` : ''}\n        </div>\n        \\`;\n      }).join('');\n    }\n\n    bindEvents() {\n      const form = document.getElementById('lzreview-comment-form');\n      const contentTextarea = document.getElementById('comment-content');\n      const charCount = document.getElementById('char-count');\n      const submitButton = document.getElementById('submit-button');\n      const authorNameInput = document.getElementById('author-name');\n      const authorEmailInput = document.getElementById('author-email');\n      const authorQQInput = document.getElementById('author-qq');\n      const avatarPreview = document.getElementById('avatar-preview');\n\n      // \u5934\u50CF\u9884\u89C8\u66F4\u65B0\u51FD\u6570\n      const updateAvatarPreview = async () => {\n        const name = authorNameInput.value.trim();\n        const email = authorEmailInput.value.trim();\n        const qq = authorQQInput.value.trim();\n        \n        if (name || email || qq) {\n          const avatarUrl = getAvatarUrl(name, email, qq);\n          const validUrl = await preloadAvatar(avatarUrl);\n          if (validUrl) {\n            avatarPreview.src = validUrl;\n            avatarPreview.style.display = 'block';\n          } else {\n            avatarPreview.style.display = 'none';\n          }\n        } else {\n          avatarPreview.style.display = 'none';\n        }\n      };\n\n      // \u76D1\u542C\u8F93\u5165\u53D8\u5316\u4EE5\u66F4\u65B0\u5934\u50CF\u9884\u89C8\n      authorNameInput.addEventListener('input', updateAvatarPreview);\n      authorEmailInput.addEventListener('input', updateAvatarPreview);\n      authorQQInput.addEventListener('input', updateAvatarPreview);\n\n      // \u5B57\u7B26\u8BA1\u6570\n      contentTextarea.addEventListener('input', () => {\n        const length = contentTextarea.value.length;\n        charCount.textContent = \\`\\${length}/\\${this.config.maxLength}\\`;\n        charCount.className = \\`lzreview-char-count \\${length > this.config.maxLength * 0.9 ? 'warning' : ''}\\`;\n      });\n\n      // \u8868\u5355\u63D0\u4EA4\n      form.addEventListener('submit', async (e) => {\n        e.preventDefault();\n        await this.submitComment();\n      });\n\n      // \u521D\u59CB\u5316\u5934\u50CF\u9884\u89C8\n      updateAvatarPreview();\n    }\n\n    async submitComment() {\n      const authorName = document.getElementById('author-name').value.trim();\n      const authorEmail = document.getElementById('author-email').value.trim();\n      const authorQQ = document.getElementById('author-qq').value.trim();\n      const content = document.getElementById('comment-content').value.trim();\n      const submitButton = document.getElementById('submit-button');\n      const messageEl = document.getElementById('lzreview-message');\n\n      // \u6E05\u9664\u4E4B\u524D\u7684\u6D88\u606F\n      messageEl.innerHTML = '';\n\n      // \u9A8C\u8BC1\n      if (!authorName || !content) {\n        this.showMessage('\u8BF7\u586B\u5199\u5FC5\u586B\u5B57\u6BB5', 'error');\n        return;\n      }\n\n      if (content.length > this.config.maxLength) {\n        this.showMessage(\\`\u8BC4\u8BBA\u5185\u5BB9\u4E0D\u80FD\u8D85\u8FC7\\${this.config.maxLength}\u4E2A\u5B57\u7B26\\`, 'error');\n        return;\n      }\n\n      if (this.config.requireEmail && !authorEmail) {\n        this.showMessage('\u8BF7\u586B\u5199\u90AE\u7BB1\u5730\u5740', 'error');\n        return;\n      }\n\n      // \u63D0\u4EA4\u8BC4\u8BBA\n      submitButton.disabled = true;\n      submitButton.textContent = '\u53D1\u5E03\u4E2D...';\n\n      try {\n        const payload = {\n          pageUrl: this.config.pageUrl,\n          authorName,\n          authorEmail: authorEmail || null,\n          authorQQ: authorQQ || null,\n          content,\n          csrfToken: this.csrfToken\n        };\n        const response = await fetch(\\`\\${this.config.apiUrl}/api/comments\\`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(payload)\n        });\n\n        const data = await response.json();\n        \n        if (data.success) {\n          this.showMessage('\u8BC4\u8BBA\u53D1\u5E03\u6210\u529F\uFF01', 'success');\n          document.getElementById('lzreview-comment-form').reset();\n          document.getElementById('char-count').textContent = \\`0/\\${this.config.maxLength}\\`;\n          \n          // \u91CD\u65B0\u52A0\u8F7D\u8BC4\u8BBA\n          await this.loadComments();\n          this.updateCommentsList();\n        } else {\n          console.error('Server error:', data);\n          // \u5982\u679C\u662F\u767D\u540D\u5355\u9650\u5236\uFF0C\u663E\u793A\u7279\u6B8A\u9519\u8BEF\u9875\u9762\n          if (response.status === 403 && data.message.includes('\u767D\u540D\u5355')) {\n            this.showWhitelistError(data.message);\n            return;\n          }\n          this.showMessage(data.message || '\u8BC4\u8BBA\u53D1\u5E03\u5931\u8D25', 'error');\n        }\n      } catch (error) {\n        console.error('\u63D0\u4EA4\u8BC4\u8BBA\u5931\u8D25:', error);\n        this.showMessage('\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5', 'error');\n      } finally {\n        submitButton.disabled = false;\n        submitButton.textContent = '\u53D1\u5E03\u8BC4\u8BBA';\n      }\n    }\n\n    updateCommentsList() {\n      const container = document.getElementById('comments-container');\n      container.innerHTML = this.comments.length > 0 \n        ? this.renderComments(this.comments)\n        : '<p style=\"color: #666; text-align: center; padding: 20px;\">\u6682\u65E0\u8BC4\u8BBA\uFF0C\u5FEB\u6765\u53D1\u8868\u7B2C\u4E00\u6761\u8BC4\u8BBA\u5427\uFF01</p>';\n    }\n\n    showMessage(message, type) {\n      const messageEl = document.getElementById('lzreview-message');\n      // \u5B89\u5168\u7684DOM\u64CD\u4F5C\uFF0C\u907F\u514DXSS\n      messageEl.innerHTML = '';\n      const div = document.createElement('div');\n      div.className = \\`lzreview-\\${type}\\`;\n      div.textContent = message; // \u4F7F\u7528textContent\u800C\u4E0D\u662FinnerHTML\n      messageEl.appendChild(div);\n    }\n\n    showWhitelistError(message) {\n      // \u5B89\u5168\u7684DOM\u64CD\u4F5C\uFF0C\u907F\u514DXSS\n      this.container.innerHTML = '';\n      \n      const container = document.createElement('div');\n      container.className = 'lzreview-container';\n      \n      const errorDiv = document.createElement('div');\n      errorDiv.className = 'lzreview-error';\n      errorDiv.style.cssText = 'text-align: center; padding: 40px; margin: 20px 0;';\n      \n      const title = document.createElement('h3');\n      title.style.cssText = 'color: #721c24; margin-bottom: 15px;';\n      title.textContent = '\u8BC4\u8BBA\u7CFB\u7EDF\u8BBF\u95EE\u53D7\u9650';\n      \n      const messageP = document.createElement('p');\n      messageP.style.cssText = 'margin-bottom: 20px; font-size: 16px;';\n      messageP.textContent = message;\n      \n      const helpP = document.createElement('p');\n      helpP.style.cssText = 'color: #6c757d; font-size: 14px;';\n      helpP.textContent = '\u5982\u9700\u4F7F\u7528\u8BC4\u8BBA\u529F\u80FD\uFF0C\u8BF7\u8054\u7CFB\u7F51\u7AD9\u7BA1\u7406\u5458\u5C06\u5F53\u524D\u57DF\u540D\u6DFB\u52A0\u5230\u767D\u540D\u5355\u4E2D\u3002';\n      \n      errorDiv.appendChild(title);\n      errorDiv.appendChild(messageP);\n      errorDiv.appendChild(helpP);\n      container.appendChild(errorDiv);\n      this.container.appendChild(container);\n    }\n\n    escapeHtml(text) {\n      const div = document.createElement('div');\n      div.textContent = text;\n      return div.innerHTML;\n    }\n\n    formatDate(dateString) {\n      // \u6570\u636E\u5E93\u5B58\u50A8\u7684\u5DF2\u7ECF\u662F\u4E2D\u56FD\u65F6\u95F4\uFF0C\u76F4\u63A5\u89E3\u6790\u5373\u53EF\n      const date = new Date(dateString.replace(' ', 'T'));\n      const now = new Date();\n      const diff = now - date;\n      \n      if (diff < 60000) return '\u521A\u521A';\n      if (diff < 3600000) return \\`\\${Math.floor(diff / 60000)}\u5206\u949F\u524D\\`;\n      if (diff < 86400000) return \\`\\${Math.floor(diff / 3600000)}\u5C0F\u65F6\u524D\\`;\n      if (diff < 2592000000) return \\`\\${Math.floor(diff / 86400000)}\u5929\u524D\\`;\n      \n      return date.toLocaleDateString('zh-CN');\n    }\n\n    async submitReply(parentId) {\n      const replyContent = document.getElementById(\\`reply-content-\\${parentId}\\`).value.trim();\n      const authorName = document.getElementById(\\`reply-author-name-\\${parentId}\\`).value.trim();\n      const authorEmail = document.getElementById(\\`reply-author-email-\\${parentId}\\`).value.trim();\n      const authorQQ = document.getElementById(\\`reply-author-qq-\\${parentId}\\`).value.trim();\n      \n      if (!authorName) {\n        this.showMessage('\u8BF7\u586B\u5199\u59D3\u540D', 'error');\n        return;\n      }\n      \n      if (!replyContent) {\n        this.showMessage('\u8BF7\u586B\u5199\u56DE\u590D\u5185\u5BB9', 'error');\n        return;\n      }\n\n      try {\n        const payload = {\n          pageUrl: this.config.pageUrl,\n          authorName,\n          authorEmail: authorEmail || null,\n          authorQQ: authorQQ || null,\n          content: replyContent,\n          parentId: parentId,\n          csrfToken: this.csrfToken\n        };\n\n        const response = await fetch(\\`\\${this.config.apiUrl}/api/comments\\`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(payload)\n        });\n\n        const data = await response.json();\n\n        if (data.success) {\n          this.showMessage('\u56DE\u590D\u53D1\u5E03\u6210\u529F\uFF01', 'success');\n          document.getElementById(\\`reply-content-\\${parentId}\\`).value = '';\n          document.getElementById(\\`reply-author-name-\\${parentId}\\`).value = '';\n          document.getElementById(\\`reply-author-email-\\${parentId}\\`).value = '';\n          document.getElementById(\\`reply-author-qq-\\${parentId}\\`).value = '';\n          document.getElementById(\\`reply-form-\\${parentId}\\`).style.display = 'none';\n          \n          // \u91CD\u65B0\u52A0\u8F7D\u8BC4\u8BBA\n          await this.loadComments();\n          this.updateCommentsList();\n        } else {\n          // \u5982\u679C\u662F\u767D\u540D\u5355\u9650\u5236\uFF0C\u663E\u793A\u7279\u6B8A\u9519\u8BEF\u9875\u9762\n          if (response.status === 403 && data.message.includes('\u767D\u540D\u5355')) {\n            this.showWhitelistError(data.message);\n            return;\n          }\n          this.showMessage(data.message || '\u56DE\u590D\u53D1\u5E03\u5931\u8D25', 'error');\n        }\n      } catch (error) {\n        console.error('\u63D0\u4EA4\u56DE\u590D\u5931\u8D25:', error);\n        this.showMessage('\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5', 'error');\n      }\n    }\n\n    toggleReplyForm(commentId) {\n      const replyForm = document.getElementById(\\`reply-form-\\${commentId}\\`);\n      if (replyForm.style.display === 'none') {\n        replyForm.style.display = 'block';\n      } else {\n        replyForm.style.display = 'none';\n      }\n    }\n  }\n\n  // \u5168\u5C40\u53D8\u91CF\u5B58\u50A8\u5B9E\u4F8B\n  let lzReviewInstance = null;\n\n  // \u5168\u5C40\u51FD\u6570\n  window.toggleReplyForm = function(commentId) {\n    if (lzReviewInstance) {\n      lzReviewInstance.toggleReplyForm(commentId);\n    }\n  };\n\n  window.submitReply = function(parentId) {\n    if (lzReviewInstance) {\n      lzReviewInstance.submitReply(parentId);\n    }\n  };\n\n  // \u521D\u59CB\u5316\u8BC4\u8BBA\u7CFB\u7EDF\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      lzReviewInstance = new LzReview(config);\n    });\n  } else {\n    lzReviewInstance = new LzReview(config);\n  }\n})();\n`;\n\nexport default embedScript;", "export class DatabaseService {\n  constructor(db) {\n    this.db = db;\n  }\n\n  async getComments(pageUrl, limit = 50, offset = 0) {\n    try {\n      const stmt = this.db.prepare(`\n        SELECT \n          id, page_url, author_name, author_email, author_qq, content, created_at, parent_id,\n          CASE \n            WHEN author_email IS NOT NULL THEN 1 \n            ELSE 0 \n          END as has_email\n        FROM comments \n        WHERE page_url = ? AND is_approved = 1 \n        ORDER BY created_at DESC \n        LIMIT ? OFFSET ?\n      `);\n      const result = await stmt.bind(pageUrl, limit, offset).all();\n      return result.results || [];\n    } catch (error) {\n      console.error('Database getComments error:', error);\n      return [];\n    }\n  }\n\n  async addComment(commentData) {\n    try {\n      const { pageUrl, authorName, authorEmail, authorQQ, content, ipAddress, userAgent, parentId } = commentData;\n      \n      // \u6570\u636E\u9A8C\u8BC1\n      if (!pageUrl || !authorName || !content) {\n        throw new Error('\u5FC5\u8981\u5B57\u6BB5\u4E0D\u80FD\u4E3A\u7A7A');\n      }\n      \n      // \u957F\u5EA6\u9650\u5236\u9A8C\u8BC1\n      if (authorName.length > 50 || content.length > 1000) {\n        throw new Error('\u5B57\u6BB5\u957F\u5EA6\u8D85\u51FA\u9650\u5236');\n      }\n      \n      if (authorEmail && authorEmail.length > 254) {\n        throw new Error('\u90AE\u7BB1\u5730\u5740\u8FC7\u957F');\n      }\n      \n      if (authorQQ && authorQQ.length > 15) {\n        throw new Error('QQ\u53F7\u8FC7\u957F');\n      }\n      \n      console.log('Attempting to insert comment:', { pageUrl, authorName, content: content.substring(0, 50) + '...' });\n      \n      // \u4F7F\u7528\u4E2D\u56FD\u65F6\u95F4 (UTC+8)\n      const chinaTime = new Date(Date.now() + 8 * 60 * 60 * 1000).toISOString().replace('T', ' ').replace('Z', '');\n      \n      const stmt = this.db.prepare(`\n        INSERT INTO comments (page_url, author_name, author_email, author_qq, content, ip_address, user_agent, parent_id, created_at)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n      `);\n      \n      const result = await stmt.bind(\n        pageUrl, \n        authorName, \n        authorEmail || null, \n        authorQQ || null,\n        content, \n        ipAddress, \n        userAgent, \n        parentId || null,\n        chinaTime\n      ).run();\n      \n      console.log('Insert result - ID:', result.meta.last_row_id);\n      return result.meta.last_row_id;\n    } catch (error) {\n      console.error('Database addComment error:', error.message);\n      throw new Error(`\u6570\u636E\u5E93\u9519\u8BEF\uFF1A${error.message}`);\n    }\n  }\n\n  async deleteComment(commentId, adminToken) {\n    if (!this.isValidAdmin(adminToken)) {\n      throw new Error('Unauthorized');\n    }\n    \n    const stmt = this.db.prepare('DELETE FROM comments WHERE id = ?');\n    const result = await stmt.bind(commentId).run();\n    return result.meta.changes > 0;\n  }\n\n  async getCommentCount(pageUrl) {\n    try {\n      const stmt = this.db.prepare(`\n        SELECT COUNT(*) as count \n        FROM comments \n        WHERE page_url = ? AND is_approved = 1\n      `);\n      const result = await stmt.bind(pageUrl).first();\n      return result?.count || 0;\n    } catch (error) {\n      console.error('Database getCommentCount error:', error);\n      return 0;\n    }\n  }\n\n  isValidAdmin(token) {\n    if (!token || typeof token !== 'string') {\n      return false;\n    }\n    \n    if (!this.adminToken || typeof this.adminToken !== 'string') {\n      return false;\n    }\n    \n    // \u4F7F\u7528\u5E38\u91CF\u65F6\u95F4\u6BD4\u8F83\u9632\u6B62\u65F6\u5E8F\u653B\u51FB\n    return this.constantTimeCompare(token, this.adminToken);\n  }\n  \n  // \u5E38\u91CF\u65F6\u95F4\u6BD4\u8F83\u51FD\u6570\n  constantTimeCompare(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    \n    let result = 0;\n    for (let i = 0; i < a.length; i++) {\n      result |= a.charCodeAt(i) ^ b.charCodeAt(i);\n    }\n    \n    return result === 0;\n  }\n\n  setAdminToken(token) {\n    this.adminToken = token;\n  }\n\n  // \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u83B7\u53D6\u6240\u6709\u8BC4\u8BBA\n  async getAllComments() {\n    try {\n      const stmt = this.db.prepare(`\n        SELECT \n          id, page_url, author_name, author_email, author_qq, content, created_at, parent_id,\n          CASE \n            WHEN author_email IS NOT NULL THEN 1 \n            ELSE 0 \n          END as has_email\n        FROM comments \n        ORDER BY created_at DESC\n      `);\n      const result = await stmt.all();\n      return result.results || [];\n    } catch (error) {\n      console.error('Database getAllComments error:', error);\n      return [];\n    }\n  }\n\n  // \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u83B7\u53D6\u7EDF\u8BA1\u4FE1\u606F\n  async getStats() {\n    try {\n      const totalStmt = this.db.prepare('SELECT COUNT(*) as total FROM comments');\n      const totalResult = await totalStmt.first();\n      \n      const todayStmt = this.db.prepare(`\n        SELECT COUNT(*) as today \n        FROM comments \n        WHERE DATE(created_at) = DATE('now', '+8 hours')\n      `);\n      const todayResult = await todayStmt.first();\n      \n      const pagesStmt = this.db.prepare('SELECT COUNT(DISTINCT page_url) as pages FROM comments');\n      const pagesResult = await pagesStmt.first();\n      \n      const whitelistStmt = this.db.prepare('SELECT COUNT(*) as whitelist FROM whitelist');\n      const whitelistResult = await whitelistStmt.first();\n      \n      return {\n        total: totalResult?.total || 0,\n        today: todayResult?.today || 0,\n        pages: pagesResult?.pages || 0,\n        whitelist: whitelistResult?.whitelist || 0\n      };\n    } catch (error) {\n      console.error('Database getStats error:', error);\n      return { total: 0, today: 0, pages: 0, whitelist: 0 };\n    }\n  }\n\n  // \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u83B7\u53D6\u9875\u9762\u5217\u8868\n  async getPages() {\n    try {\n      const stmt = this.db.prepare(`\n        SELECT \n          page_url,\n          COUNT(*) as comment_count,\n          MAX(created_at) as latest_comment\n        FROM comments \n        GROUP BY page_url \n        ORDER BY latest_comment DESC\n      `);\n      const result = await stmt.all();\n      return result.results || [];\n    } catch (error) {\n      console.error('Database getPages error:', error);\n      return [];\n    }\n  }\n\n  // \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u6279\u91CF\u5220\u9664\u8BC4\u8BBA\n  async batchDeleteComments(ids) {\n    try {\n      // \u6570\u636E\u9A8C\u8BC1\n      if (!Array.isArray(ids) || ids.length === 0) {\n        throw new Error('\u65E0\u6548\u7684ID\u5217\u8868');\n      }\n      \n      // \u9650\u5236\u6279\u91CF\u5220\u9664\u6570\u91CF\u9632\u6B62\u6EE5\u7528\n      if (ids.length > 100) {\n        throw new Error('\u6279\u91CF\u5220\u9664\u6570\u91CF\u8FC7\u591A\uFF0C\u6700\u591A100\u6761');\n      }\n      \n      // \u9A8C\u8BC1\u6240\u6709ID\u90FD\u662F\u6570\u5B57\n      const validIds = ids.filter(id => Number.isInteger(id) && id > 0);\n      if (validIds.length === 0) {\n        throw new Error('\u65E0\u6548\u7684ID\u683C\u5F0F');\n      }\n      \n      const placeholders = validIds.map(() => '?').join(',');\n      const stmt = this.db.prepare(`DELETE FROM comments WHERE id IN (${placeholders})`);\n      const result = await stmt.bind(...validIds).run();\n      \n      console.log(`\u6279\u91CF\u5220\u9664\u6210\u529F: ${result.meta.changes} \u6761\u8BB0\u5F55`);\n      return result.meta.changes || 0;\n    } catch (error) {\n      console.error('Database batchDeleteComments error:', error);\n      throw new Error(`\u6279\u91CF\u5220\u9664\u5931\u8D25\uFF1A${error.message}`);\n    }\n  }\n\n  // \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u5220\u9664\u9875\u9762\u6240\u6709\u8BC4\u8BBA\n  async deletePageComments(pageUrl) {\n    try {\n      const stmt = this.db.prepare('DELETE FROM comments WHERE page_url = ?');\n      const result = await stmt.bind(pageUrl).run();\n      return result.meta.changes || 0;\n    } catch (error) {\n      console.error('Database deletePageComments error:', error);\n      return 0;\n    }\n  }\n\n  // \u767D\u540D\u5355\u76F8\u5173\u65B9\u6CD5\n  async getWhitelist() {\n    try {\n      const stmt = this.db.prepare('SELECT * FROM whitelist ORDER BY created_at DESC');\n      const result = await stmt.all();\n      return result.results || [];\n    } catch (error) {\n      console.error('Database getWhitelist error:', error);\n      return [];\n    }\n  }\n\n  async addToWhitelist(domain, description = null) {\n    try {\n      // \u6570\u636E\u9A8C\u8BC1\n      if (!domain || typeof domain !== 'string') {\n        throw new Error('\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A');\n      }\n      \n      // \u57DF\u540D\u957F\u5EA6\u9650\u5236\n      if (domain.length > 253) {\n        throw new Error('\u57DF\u540D\u8FC7\u957F');\n      }\n      \n      // \u57DF\u540D\u683C\u5F0F\u9A8C\u8BC1\n      const domainRegex = /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?))*$/;\n      if (!domainRegex.test(domain)) {\n        throw new Error('\u57DF\u540D\u683C\u5F0F\u4E0D\u6B63\u786E');\n      }\n      \n      // \u6807\u51C6\u5316\u57DF\u540D\n      const normalizedDomain = domain.toLowerCase().trim();\n      \n      // \u63CF\u8FF0\u957F\u5EA6\u9650\u5236\n      if (description && description.length > 255) {\n        throw new Error('\u63CF\u8FF0\u8FC7\u957F');\n      }\n      \n      const stmt = this.db.prepare('INSERT INTO whitelist (domain, description) VALUES (?, ?)');\n      const result = await stmt.bind(normalizedDomain, description).run();\n      \n      console.log(`\u6DFB\u52A0\u767D\u540D\u5355\u6210\u529F: ${normalizedDomain}`);\n      return result.meta.last_row_id;\n    } catch (error) {\n      console.error('Database addToWhitelist error:', error);\n      throw new Error(`\u6DFB\u52A0\u767D\u540D\u5355\u5931\u8D25\uFF1A${error.message}`);\n    }\n  }\n\n  async removeFromWhitelist(id) {\n    try {\n      const stmt = this.db.prepare('DELETE FROM whitelist WHERE id = ?');\n      const result = await stmt.bind(id).run();\n      return result.meta.changes > 0;\n    } catch (error) {\n      console.error('Database removeFromWhitelist error:', error);\n      return false;\n    }\n  }\n\n  async isWhitelisted(domain) {\n    try {\n      if (!domain || typeof domain !== 'string') {\n        return false;\n      }\n      \n      // \u6807\u51C6\u5316\u57DF\u540D\n      const normalizedDomain = domain.toLowerCase().trim();\n      \n      const stmt = this.db.prepare('SELECT COUNT(*) as count FROM whitelist WHERE domain = ?');\n      const result = await stmt.bind(normalizedDomain).first();\n      \n      return result?.count > 0;\n    } catch (error) {\n      console.error('Database isWhitelisted error:', error);\n      return false;\n    }\n  }\n\n  // \u901F\u7387\u9650\u5236\u76F8\u5173\u65B9\u6CD5\n  async checkRateLimit(ipHash, maxRequests = 10, windowMinutes = 1) {\n    try {\n      // \u6E05\u7406\u8FC7\u671F\u8BB0\u5F55\n      await this.cleanOldRateLimits(windowMinutes);\n      \n      const windowStart = new Date(Date.now() - windowMinutes * 60 * 1000).toISOString();\n      \n      // \u68C0\u67E5\u5F53\u524D\u7A97\u53E3\u5185\u7684\u8BF7\u6C42\u6570\n      const stmt = this.db.prepare(`\n        SELECT request_count \n        FROM rate_limits \n        WHERE ip_hash = ? AND window_start > ?\n      `);\n      const result = await stmt.bind(ipHash, windowStart).first();\n      \n      if (!result) {\n        // \u6CA1\u6709\u8BB0\u5F55\uFF0C\u521B\u5EFA\u65B0\u8BB0\u5F55\n        await this.createRateLimit(ipHash);\n        return true;\n      }\n      \n      if (result.request_count >= maxRequests) {\n        return false;\n      }\n      \n      // \u66F4\u65B0\u8BF7\u6C42\u8BA1\u6570\n      await this.updateRateLimit(ipHash);\n      return true;\n    } catch (error) {\n      console.error('Database checkRateLimit error:', error);\n      return true; // \u51FA\u9519\u65F6\u5141\u8BB8\u8BF7\u6C42\n    }\n  }\n\n  async createRateLimit(ipHash) {\n    const stmt = this.db.prepare(`\n      INSERT INTO rate_limits (ip_hash, request_count, window_start, updated_at) \n      VALUES (?, 1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)\n    `);\n    await stmt.bind(ipHash).run();\n  }\n\n  async updateRateLimit(ipHash) {\n    const stmt = this.db.prepare(`\n      UPDATE rate_limits \n      SET request_count = request_count + 1, updated_at = CURRENT_TIMESTAMP \n      WHERE ip_hash = ?\n    `);\n    await stmt.bind(ipHash).run();\n  }\n\n  async cleanOldRateLimits(windowMinutes = 1) {\n    const cutoff = new Date(Date.now() - windowMinutes * 60 * 1000).toISOString();\n    const stmt = this.db.prepare('DELETE FROM rate_limits WHERE window_start < ?');\n    await stmt.bind(cutoff).run();\n  }\n}", "export function validateComment(data) {\n  const errors = [];\n  \n  // \u9A8C\u8BC1\u6570\u636E\u7C7B\u578B\n  if (!data || typeof data !== 'object') {\n    errors.push('\u65E0\u6548\u7684\u8BF7\u6C42\u6570\u636E');\n    return { isValid: false, errors };\n  }\n  \n  // \u9A8C\u8BC1\u9875\u9762URL\n  if (!data.pageUrl || typeof data.pageUrl !== 'string') {\n    errors.push('\u9875\u9762URL\u4E0D\u80FD\u4E3A\u7A7A');\n  } else if (!isValidUrl(data.pageUrl)) {\n    errors.push('\u9875\u9762URL\u683C\u5F0F\u4E0D\u6B63\u786E');\n  }\n  \n  // \u9A8C\u8BC1\u7528\u6237\u540D\n  if (!data.authorName || typeof data.authorName !== 'string' || data.authorName.trim().length === 0) {\n    errors.push('\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A');\n  } else if (data.authorName.length > 50) {\n    errors.push('\u7528\u6237\u540D\u4E0D\u80FD\u8D85\u8FC750\u4E2A\u5B57\u7B26');\n  } else if (containsControlCharacters(data.authorName)) {\n    errors.push('\u7528\u6237\u540D\u5305\u542B\u975E\u6CD5\u5B57\u7B26');\n  }\n  \n  // \u9A8C\u8BC1\u8BC4\u8BBA\u5185\u5BB9\n  if (!data.content || typeof data.content !== 'string' || data.content.trim().length === 0) {\n    errors.push('\u8BC4\u8BBA\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A');\n  } else if (data.content.length > 1000) {\n    errors.push('\u8BC4\u8BBA\u5185\u5BB9\u4E0D\u80FD\u8D85\u8FC71000\u4E2A\u5B57\u7B26');\n  } else if (containsControlCharacters(data.content)) {\n    errors.push('\u8BC4\u8BBA\u5185\u5BB9\u5305\u542B\u975E\u6CD5\u5B57\u7B26');\n  }\n  \n  // \u9A8C\u8BC1\u90AE\u7BB1\n  if (data.authorEmail && !isValidEmail(data.authorEmail)) {\n    errors.push('\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E');\n  }\n  \n  // \u9A8C\u8BC1QQ\u53F7\n  if (data.authorQQ && !isValidQQ(data.authorQQ)) {\n    errors.push('QQ\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E');\n  }\n  \n  // \u9A8C\u8BC1\u7236\u8BC4\u8BBAID\n  if (data.parentId && (!Number.isInteger(data.parentId) || data.parentId <= 0)) {\n    errors.push('\u7236\u8BC4\u8BBAID\u683C\u5F0F\u4E0D\u6B63\u786E');\n  }\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\nexport function isValidEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\nexport function isValidQQ(qq) {\n  if (typeof qq !== 'string' || qq.length === 0) {\n    return false;\n  }\n  \n  // QQ\u53F7\u5FC5\u987B\u662F5-11\u4F4D\u6570\u5B57\uFF0C\u4E14\u4E0D\u80FD\u4EE50\u5F00\u5934\n  const qqRegex = /^[1-9][0-9]{4,10}$/;\n  return qqRegex.test(qq);\n}\n\n// \u68C0\u67E5\u5B57\u7B26\u4E32\u662F\u5426\u5305\u542B\u63A7\u5236\u5B57\u7B26\u6216\u5371\u9669\u5B57\u7B26\nexport function containsControlCharacters(str) {\n  if (typeof str !== 'string') return false;\n  \n  // \u68C0\u67E5\u63A7\u5236\u5B57\u7B26\u548C\u5371\u9669\u5B57\u7B26\n  const dangerousChars = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x9F\\uFEFF]/;\n  return dangerousChars.test(str);\n}\n\n// \u6807\u51C6\u5316\u57DF\u540D\nexport function normalizeDomain(domain) {\n  if (typeof domain !== 'string') return '';\n  \n  try {\n    // \u8F6C\u6362\u4E3A\u5C0F\u5199\n    domain = domain.toLowerCase();\n    \n    // \u79FB\u9664\u524D\u540E\u7A7A\u683C\n    domain = domain.trim();\n    \n    // \u5904\u7406\u56FD\u9645\u5316\u57DF\u540D\n    if (domain.includes('xn--')) {\n      try {\n        // \u5C1D\u8BD5\u4F7F\u7528URL\u6784\u9020\u5668\u6807\u51C6\u5316\n        const url = new URL(`http://${domain}`);\n        domain = url.hostname;\n      } catch (e) {\n        // \u5982\u679C\u5931\u8D25\uFF0C\u8FD4\u56DE\u539F\u57DF\u540D\n      }\n    }\n    \n    return domain;\n  } catch (e) {\n    return '';\n  }\n}\n\nexport function sanitizeInput(input) {\n  if (typeof input !== 'string') return input;\n  \n  return input\n    .replace(/&/g, '&amp;')  // \u5FC5\u987B\u9996\u5148\u8F6C\u4E49&\u7B26\u53F7\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;')\n    .replace(/\\n/g, '&#x0A;')  // \u8F6C\u4E49\u6362\u884C\u7B26\n    .replace(/\\r/g, '&#x0D;')  // \u8F6C\u4E49\u56DE\u8F66\u7B26\n    .replace(/\\t/g, '&#x09;'); // \u8F6C\u4E49\u5236\u8868\u7B26\n}\n\nexport function isValidUrl(url) {\n  try {\n    if (typeof url !== 'string' || url.length === 0 || url.length > 2048) {\n      return false;\n    }\n    \n    // \u68C0\u67E5URL\u683C\u5F0F\n    const urlObj = new URL(url);\n    \n    // \u53EA\u5141\u8BB8http\u548Chttps\u534F\u8BAE\n    if (!['http:', 'https:'].includes(urlObj.protocol)) {\n      return false;\n    }\n    \n    // \u68C0\u67E5\u4E3B\u673A\u540D\u683C\u5F0F\n    if (!urlObj.hostname || urlObj.hostname.length > 253) {\n      return false;\n    }\n    \n    // \u9632\u6B62IP\u5730\u5740\u7ED5\u8FC7\n    const ipRegex = /^(\\d{1,3}\\.){3}\\d{1,3}$/;\n    if (ipRegex.test(urlObj.hostname)) {\n      // \u5982\u679C\u662FIP\u5730\u5740\uFF0C\u9700\u8981\u989D\u5916\u9A8C\u8BC1\n      const parts = urlObj.hostname.split('.');\n      if (parts.some(part => parseInt(part) > 255)) {\n        return false;\n      }\n    }\n    \n    return true;\n  } catch {\n    return false;\n  }\n}", "export function getClientIP(request) {\n  const cfConnectingIP = request.headers.get('CF-Connecting-IP');\n  const xForwardedFor = request.headers.get('X-Forwarded-For');\n  const xRealIP = request.headers.get('X-Real-IP');\n  \n  return cfConnectingIP || xForwardedFor?.split(',')[0] || xRealIP || 'unknown';\n}\n\nexport function getUserAgent(request) {\n  return request.headers.get('User-Agent') || 'unknown';\n}\n\nexport function rateLimitCheck(ip, cache) {\n  const key = `ratelimit:${ip}`;\n  const now = Date.now();\n  const windowMs = 60000; // 1\u5206\u949F\n  const maxRequests = 10; // \u6BCF\u5206\u949F\u6700\u591A10\u4E2A\u8BF7\u6C42\n  \n  const requests = cache.get(key) || [];\n  const validRequests = requests.filter(time => now - time < windowMs);\n  \n  if (validRequests.length >= maxRequests) {\n    return false;\n  }\n  \n  validRequests.push(now);\n  cache.set(key, validRequests);\n  \n  // \u6E05\u7406\u8FC7\u671F\u7684\u7F13\u5B58\u9879\n  if (validRequests.length > maxRequests * 2) {\n    cache.set(key, validRequests.slice(-maxRequests));\n  }\n  \n  return true;\n}\n\nexport async function hashEmail(email) {\n  if (!email || typeof email !== 'string') return null;\n  \n  try {\n    const crypto = globalThis.crypto;\n    const encoder = new TextEncoder();\n    // \u6DFB\u52A0\u76D0\u503C\u589E\u52A0\u5B89\u5168\u6027\n    const data = encoder.encode(email.toLowerCase() + 'email_salt_2023');\n    \n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n  } catch (error) {\n    console.error('Hash email error:', error);\n    return null;\n  }\n}\n\nexport function containsBadWords(text) {\n  if (typeof text !== 'string') return false;\n  \n  const badWords = [\n    '\u5783\u573E', '\u5E7F\u544A', 'spam', '\u8272\u60C5', '\u8D4C\u535A', '\u6BD2\u54C1', \n    '\u66B4\u529B', '\u6050\u6016', '\u53CD\u52A8', '\u5206\u88C2', '\u90AA\u6559',\n    'fuck', 'shit', 'bitch', 'porn', 'sex',\n    // \u53EF\u4EE5\u6839\u636E\u9700\u8981\u6DFB\u52A0\u66F4\u591A\u654F\u611F\u8BCD\n  ];\n  \n  const lowerText = text.toLowerCase();\n  \n  return badWords.some(word => {\n    // \u68C0\u67E5\u76F4\u63A5\u5339\u914D\n    if (lowerText.includes(word)) return true;\n    \n    // \u68C0\u67E5\u53D8\u4F53\uFF08\u7528\u6570\u5B57\u66FF\u6362\u5B57\u6BCD\u7B49\uFF09\n    const variations = generateWordVariations(word);\n    return variations.some(variant => lowerText.includes(variant));\n  });\n}\n\n// \u751F\u6210\u8BCD\u6C47\u53D8\u4F53\uFF08\u7B80\u5355\u7684\u53D8\u4F53\u68C0\u6D4B\uFF09\nfunction generateWordVariations(word) {\n  const variations = [word];\n  \n  // \u6570\u5B57\u66FF\u6362\n  const replacements = {\n    'a': ['@', '4'],\n    'e': ['3'],\n    'i': ['1', '!'],\n    'o': ['0'],\n    's': ['$', '5'],\n    't': ['7']\n  };\n  \n  let current = word;\n  for (const [letter, nums] of Object.entries(replacements)) {\n    for (const num of nums) {\n      variations.push(current.replace(new RegExp(letter, 'g'), num));\n    }\n  }\n  \n  return variations;\n}\n\n// \u751F\u6210\u5B89\u5168\u7684\u968F\u673A\u4EE4\u724C\nexport function generateSecureToken(length = 32) {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let result = '';\n  \n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  \n  return result;\n}\n\n// \u5B89\u5168\u7684\u4EE4\u724C\u9A8C\u8BC1\nexport function verifySecureToken(token, validTokens) {\n  if (!token || typeof token !== 'string') {\n    return false;\n  }\n  \n  // \u9632\u6B62\u65F6\u5E8F\u653B\u51FB\n  let isValid = false;\n  for (const validToken of validTokens) {\n    if (constantTimeCompare(token, validToken)) {\n      isValid = true;\n    }\n  }\n  \n  return isValid;\n}\n\n// \u5E38\u91CF\u65F6\u95F4\u6BD4\u8F83\uFF0C\u9632\u6B62\u65F6\u5E8F\u653B\u51FB\nfunction constantTimeCompare(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n  \n  let result = 0;\n  for (let i = 0; i < a.length; i++) {\n    result |= a.charCodeAt(i) ^ b.charCodeAt(i);\n  }\n  \n  return result === 0;\n}\n\n// \u751F\u6210CSRF\u4EE4\u724C\nexport function generateCSRFToken() {\n  return generateSecureToken(32);\n}\n\n// \u9A8C\u8BC1CSRF\u4EE4\u724C\nexport function verifyCSRFToken(token, session) {\n  if (!token || !session || !session.csrfToken) {\n    return false;\n  }\n  \n  return constantTimeCompare(token, session.csrfToken);\n}\n\n// \u5B89\u5168\u7684IP\u5730\u5740\u54C8\u5E0C\nexport async function hashIP(ip) {\n  if (!ip || typeof ip !== 'string') {\n    return 'unknown';\n  }\n  \n  const encoder = new TextEncoder();\n  const data = encoder.encode(ip + 'salt_for_privacy');\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  \n  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n}\n\n// \u6E05\u7406\u654F\u611F\u6570\u636E\nexport function sanitizeErrorMessage(error) {\n  if (!error) return '\u672A\u77E5\u9519\u8BEF';\n  \n  const message = error.message || error.toString();\n  \n  // \u79FB\u9664\u53EF\u80FD\u5305\u542B\u654F\u611F\u4FE1\u606F\u7684\u9519\u8BEF\u6D88\u606F\n  const sensitivePatterns = [\n    /table.*not found/i,\n    /column.*not found/i,\n    /database.*error/i,\n    /sql.*error/i,\n    /connection.*failed/i,\n    /permission.*denied/i,\n    /access.*denied/i,\n    /file.*not found/i,\n    /directory.*not found/i,\n    /network.*error/i\n  ];\n  \n  for (const pattern of sensitivePatterns) {\n    if (pattern.test(message)) {\n      return '\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5';\n    }\n  }\n  \n  return message;\n}", "export function jsonResponse(data, status = 200, headers = {}) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n      ...headers\n    }\n  });\n}\n\nexport function errorResponse(message, status = 400) {\n  return jsonResponse({\n    error: true,\n    message\n  }, status);\n}\n\nexport function successResponse(data, message = 'Success') {\n  return jsonResponse({\n    success: true,\n    message,\n    data\n  });\n}\n\nexport function corsResponse() {\n  return new Response(null, {\n    status: 204,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n      'Access-Control-Max-Age': '86400'\n    }\n  });\n}\n\nexport function htmlResponse(html, status = 200) {\n  return new Response(html, {\n    status,\n    headers: {\n      'Content-Type': 'text/html; charset=utf-8'\n    }\n  });\n}", "import { validateComment, sanitizeInput } from '../utils/validation.js';\nimport { getClientIP, getUserAgent, rateLimitCheck, containsBadWords, generateCSRFToken, verifyCSRFToken, hashIP, sanitizeErrorMessage } from '../utils/security.js';\nimport { jsonResponse, errorResponse, successResponse } from '../utils/response.js';\n\nconst cache = new Map();\nconst csrfTokens = new Map(); // \u5B58\u50A8CSRF\u4EE4\u724C\n\nexport async function handleComments(request, db, env) {\n  const url = new URL(request.url);\n  const method = request.method;\n  const ip = getClientIP(request);\n\n  // \u57FA\u7840\u901F\u7387\u9650\u5236\uFF08\u4F7F\u7528\u6570\u636E\u5E93\uFF09\n  try {\n    const ipHash = await hashIP(ip);\n    const isAllowed = await db.checkRateLimit(ipHash, 10, 1);\n    if (!isAllowed) {\n      return errorResponse('\u8BF7\u6C42\u8FC7\u4E8E\u9891\u7E41\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5', 429);\n    }\n  } catch (error) {\n    console.error('Rate limit check error:', error);\n    // \u5982\u679C\u901F\u7387\u9650\u5236\u68C0\u67E5\u5931\u8D25\uFF0C\u4F7F\u7528\u5185\u5B58\u5907\u7528\u65B9\u6848\n    if (!rateLimitCheck(ip, cache)) {\n      return errorResponse('\u8BF7\u6C42\u8FC7\u4E8E\u9891\u7E41\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5', 429);\n    }\n  }\n\n  try {\n    switch (method) {\n      case 'GET':\n        // CSRF\u4EE4\u724C\u7AEF\u70B9\n        if (url.pathname === '/api/comments/csrf-token') {\n          return await getCSRFToken(request);\n        }\n        // \u7BA1\u7406\u5458\u4E13\u7528\u63A5\u53E3\n        if (url.pathname === '/api/comments/all') {\n          return await getAllCommentsForAdmin(request, db);\n        }\n        if (url.pathname === '/api/comments/stats') {\n          return await getStatsForAdmin(request, db);\n        }\n        if (url.pathname === '/api/comments/pages') {\n          return await getPagesForAdmin(request, db);\n        }\n        return await getComments(request, db);\n      case 'POST':\n        return await createComment(request, db);\n      case 'DELETE':\n        if (url.pathname === '/api/comments/batch') {\n          return await batchDeleteComments(request, db);\n        }\n        if (url.pathname === '/api/comments/page') {\n          return await deletePageComments(request, db);\n        }\n        return await deleteComment(request, db);\n      default:\n        return errorResponse('\u4E0D\u652F\u6301\u7684\u8BF7\u6C42\u65B9\u6CD5', 405);\n    }\n  } catch (error) {\n    console.error('API Error:', error);\n    const safeMessage = sanitizeErrorMessage(error);\n    return errorResponse(safeMessage, 500);\n  }\n}\n\nasync function getComments(request, db) {\n  const url = new URL(request.url);\n  const pageUrl = url.searchParams.get('page');\n  const limit = Math.min(parseInt(url.searchParams.get('limit')) || 50, 100);\n  const offset = parseInt(url.searchParams.get('offset')) || 0;\n\n  if (!pageUrl) {\n    return errorResponse('\u7F3A\u5C11\u9875\u9762URL\u53C2\u6570');\n  }\n\n  // \u89E3\u7801URL\u53C2\u6570\n  const decodedPageUrl = decodeURIComponent(pageUrl);\n  \n  // \u767D\u540D\u5355\u9A8C\u8BC1\n  try {\n    const urlObj = new URL(decodedPageUrl);\n    const hostname = urlObj.hostname;\n    const hostWithPort = urlObj.host; // \u5305\u542B\u7AEF\u53E3\u7684\u4E3B\u673A\u540D\n    \n    // \u68C0\u67E5hostname\u548Chost\u4E24\u79CD\u683C\u5F0F\n    const isHostnameWhitelisted = await db.isWhitelisted(hostname);\n    const isHostWithPortWhitelisted = await db.isWhitelisted(hostWithPort);\n    \n    if (!isHostnameWhitelisted && !isHostWithPortWhitelisted) {\n      return errorResponse(`\u8BC4\u8BBA\u7CFB\u7EDF\u5DF2\u8BBE\u7F6E\u4E3A\u767D\u540D\u5355\u6A21\u5F0F\uFF0C\u57DF\u540D ${hostWithPort} \u672A\u88AB\u6388\u6743\u4F7F\u7528\u8BC4\u8BBA\u529F\u80FD\u3002\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458\u3002`, 403);\n    }\n  } catch (error) {\n    console.error('\u767D\u540D\u5355\u9A8C\u8BC1\u5931\u8D25:', error);\n    return errorResponse('\u57DF\u540D\u9A8C\u8BC1\u5931\u8D25');\n  }\n\n  try {\n    const comments = await db.getComments(decodedPageUrl, limit, offset);\n    const total = await db.getCommentCount(decodedPageUrl);\n\n    // \u7EC4\u7EC7\u8BC4\u8BBA\u4E3A\u6811\u5F62\u7ED3\u6784\n    const commentsTree = buildCommentsTree(comments);\n\n    return successResponse({\n      comments: commentsTree,\n      total,\n      hasMore: offset + limit < total\n    });\n  } catch (error) {\n    console.error('Get comments error:', error);\n    return errorResponse('\u83B7\u53D6\u8BC4\u8BBA\u5931\u8D25');\n  }\n}\n\nasync function createComment(request, db) {\n  try {\n    let data;\n    try {\n      data = await request.json();\n    } catch (jsonError) {\n      console.error('JSON parse error:', jsonError);\n      return errorResponse('\u8BF7\u6C42\u6570\u636E\u683C\u5F0F\u9519\u8BEF');\n    }\n    // \u767D\u540D\u5355\u9A8C\u8BC1\n    try {\n      const urlObj = new URL(data.pageUrl);\n      const hostname = urlObj.hostname;\n      const hostWithPort = urlObj.host; // \u5305\u542B\u7AEF\u53E3\u7684\u4E3B\u673A\u540D\n      \n      // \u68C0\u67E5hostname\u548Chost\u4E24\u79CD\u683C\u5F0F\n      const isHostnameWhitelisted = await db.isWhitelisted(hostname);\n      const isHostWithPortWhitelisted = await db.isWhitelisted(hostWithPort);\n      \n      if (!isHostnameWhitelisted && !isHostWithPortWhitelisted) {\n        return errorResponse(`\u8BC4\u8BBA\u7CFB\u7EDF\u5DF2\u8BBE\u7F6E\u4E3A\u767D\u540D\u5355\u6A21\u5F0F\uFF0C\u57DF\u540D ${hostWithPort} \u672A\u88AB\u6388\u6743\u4F7F\u7528\u8BC4\u8BBA\u529F\u80FD\u3002\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458\u3002`, 403);\n      }\n    } catch (error) {\n      console.error('\u767D\u540D\u5355\u9A8C\u8BC1\u5931\u8D25:', error);\n      return errorResponse('\u57DF\u540D\u9A8C\u8BC1\u5931\u8D25');\n    }\n    \n    // CSRF\u4EE4\u724C\u9A8C\u8BC1\uFF08\u6682\u65F6\u7981\u7528\uFF0C\u7A0D\u540E\u4F18\u5316\uFF09\n    // const csrfToken = data.csrfToken;\n    // if (!validateCSRFToken(request, csrfToken)) {\n    //   return errorResponse('\u5B89\u5168\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5', 403);\n    // }\n    \n    // \u6570\u636E\u9A8C\u8BC1\n    const validation = validateComment(data);\n    if (!validation.isValid) {\n      return errorResponse(validation.errors.join('; '));\n    }\n\n    // \u5185\u5BB9\u5B89\u5168\u68C0\u67E5\n    if (containsBadWords(data.content) || containsBadWords(data.authorName)) {\n      return errorResponse('\u8BC4\u8BBA\u5305\u542B\u4E0D\u5F53\u5185\u5BB9\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u8BD5');\n    }\n\n    // \u51C0\u5316\u8F93\u5165\u6570\u636E\n    const clientIP = getClientIP(request);\n    const hashedIP = await hashIP(clientIP);\n    \n    const sanitizedData = {\n      pageUrl: data.pageUrl,\n      authorName: sanitizeInput(data.authorName.trim()),\n      authorEmail: data.authorEmail ? data.authorEmail.trim() : null,\n      authorQQ: data.authorQQ ? data.authorQQ.trim() : null,\n      content: sanitizeInput(data.content.trim()),\n      parentId: data.parentId || null,\n      ipAddress: hashedIP, // \u5B58\u50A8\u54C8\u5E0C\u540E\u7684IP\n      userAgent: getUserAgent(request)\n    };\n\n    // \u63D2\u5165\u8BC4\u8BBA\n    try {\n      const commentId = await db.addComment(sanitizedData);\n      \n      return successResponse(\n        { \n          id: commentId,\n          message: '\u8BC4\u8BBA\u53D1\u5E03\u6210\u529F'\n        },\n        '\u8BC4\u8BBA\u53D1\u5E03\u6210\u529F'\n      );\n    } catch (dbError) {\n      console.error('Database insert error:', dbError);\n      const safeMessage = sanitizeErrorMessage(dbError);\n      return errorResponse(`\u53D1\u5E03\u8BC4\u8BBA\u5931\u8D25\uFF1A${safeMessage}`);\n    }\n\n  } catch (error) {\n    console.error('Create comment error:', error);\n    const safeMessage = sanitizeErrorMessage(error);\n    return errorResponse(`\u53D1\u5E03\u8BC4\u8BBA\u5931\u8D25\uFF1A${safeMessage}`);\n  }\n}\n\nasync function deleteComment(request, db) {\n  const url = new URL(request.url);\n  const pathParts = url.pathname.split('/');\n  const commentId = pathParts[pathParts.length - 1];\n\n  if (!commentId || isNaN(commentId)) {\n    return errorResponse('\u65E0\u6548\u7684\u8BC4\u8BBAID');\n  }\n\n  // \u68C0\u67E5\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  try {\n    const deleted = await db.deleteComment(parseInt(commentId), token);\n    \n    if (deleted) {\n      return successResponse(null, '\u8BC4\u8BBA\u5220\u9664\u6210\u529F');\n    } else {\n      return errorResponse('\u8BC4\u8BBA\u4E0D\u5B58\u5728\u6216\u5220\u9664\u5931\u8D25', 404);\n    }\n  } catch (error) {\n    if (error.message === 'Unauthorized') {\n      return errorResponse('\u7BA1\u7406\u5458\u6743\u9650\u9A8C\u8BC1\u5931\u8D25', 403);\n    }\n    console.error('Delete comment error:', error);\n    return errorResponse('\u5220\u9664\u8BC4\u8BBA\u5931\u8D25');\n  }\n}\n\nfunction buildCommentsTree(comments) {\n  const commentMap = {};\n  const rootComments = [];\n\n  // \u521B\u5EFA\u8BC4\u8BBA\u6620\u5C04\n  comments.forEach(comment => {\n    comment.replies = [];\n    commentMap[comment.id] = comment;\n  });\n\n  // \u6784\u5EFA\u6811\u5F62\u7ED3\u6784\n  comments.forEach(comment => {\n    if (comment.parent_id && commentMap[comment.parent_id]) {\n      commentMap[comment.parent_id].replies.push(comment);\n    } else {\n      rootComments.push(comment);\n    }\n  });\n\n  return rootComments;\n}\n\n// \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u83B7\u53D6\u6240\u6709\u8BC4\u8BBA\nasync function getAllCommentsForAdmin(request, db) {\n  // \u9A8C\u8BC1\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  if (!db.isValidAdmin(token)) {\n    return errorResponse('\u7BA1\u7406\u5458\u6743\u9650\u9A8C\u8BC1\u5931\u8D25', 403);\n  }\n\n  try {\n    const comments = await db.getAllComments();\n    return successResponse({ comments });\n  } catch (error) {\n    console.error('Get all comments error:', error);\n    return errorResponse('\u83B7\u53D6\u8BC4\u8BBA\u5931\u8D25');\n  }\n}\n\n// \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u83B7\u53D6\u7EDF\u8BA1\u4FE1\u606F\nasync function getStatsForAdmin(request, db) {\n  // \u9A8C\u8BC1\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  if (!db.isValidAdmin(token)) {\n    return errorResponse('\u7BA1\u7406\u5458\u6743\u9650\u9A8C\u8BC1\u5931\u8D25', 403);\n  }\n\n  try {\n    const stats = await db.getStats();\n    return successResponse(stats);\n  } catch (error) {\n    console.error('Get stats error:', error);\n    return errorResponse('\u83B7\u53D6\u7EDF\u8BA1\u4FE1\u606F\u5931\u8D25');\n  }\n}\n\n// \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u83B7\u53D6\u9875\u9762\u5217\u8868\nasync function getPagesForAdmin(request, db) {\n  // \u9A8C\u8BC1\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  if (!db.isValidAdmin(token)) {\n    return errorResponse('\u7BA1\u7406\u5458\u6743\u9650\u9A8C\u8BC1\u5931\u8D25', 403);\n  }\n\n  try {\n    const pages = await db.getPages();\n    return successResponse({ pages });\n  } catch (error) {\n    console.error('Get pages error:', error);\n    return errorResponse('\u83B7\u53D6\u9875\u9762\u5217\u8868\u5931\u8D25');\n  }\n}\n\n// \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u6279\u91CF\u5220\u9664\u8BC4\u8BBA\nasync function batchDeleteComments(request, db) {\n  // \u9A8C\u8BC1\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  if (!db.isValidAdmin(token)) {\n    return errorResponse('\u7BA1\u7406\u5458\u6743\u9650\u9A8C\u8BC1\u5931\u8D25', 403);\n  }\n\n  try {\n    const data = await request.json();\n    const { ids } = data;\n\n    if (!ids || !Array.isArray(ids) || ids.length === 0) {\n      return errorResponse('\u8BF7\u63D0\u4F9B\u8981\u5220\u9664\u7684\u8BC4\u8BBAID\u5217\u8868');\n    }\n\n    const deletedCount = await db.batchDeleteComments(ids);\n    return successResponse({ deletedCount }, `\u6210\u529F\u5220\u9664 ${deletedCount} \u6761\u8BC4\u8BBA`);\n  } catch (error) {\n    console.error('Batch delete error:', error);\n    return errorResponse('\u6279\u91CF\u5220\u9664\u5931\u8D25');\n  }\n}\n\n// \u7BA1\u7406\u5458\u4E13\u7528\uFF1A\u5220\u9664\u9875\u9762\u6240\u6709\u8BC4\u8BBA\nasync function deletePageComments(request, db) {\n  // \u9A8C\u8BC1\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  if (!db.isValidAdmin(token)) {\n    return errorResponse('\u7BA1\u7406\u5458\u6743\u9650\u9A8C\u8BC1\u5931\u8D25', 403);\n  }\n\n  try {\n    const data = await request.json();\n    const { pageUrl } = data;\n\n    if (!pageUrl) {\n      return errorResponse('\u8BF7\u63D0\u4F9B\u9875\u9762URL');\n    }\n\n    const deletedCount = await db.deletePageComments(pageUrl);\n    return successResponse({ deletedCount }, `\u6210\u529F\u5220\u9664 ${deletedCount} \u6761\u8BC4\u8BBA`);\n  } catch (error) {\n    console.error('Delete page comments error:', error);\n    return errorResponse('\u5220\u9664\u9875\u9762\u8BC4\u8BBA\u5931\u8D25');\n  }\n}\n\n// \u83B7\u53D6CSRF\u4EE4\u724C\nasync function getCSRFToken(request) {\n  const ip = getClientIP(request);\n  const token = generateCSRFToken();\n  \n  // \u5B58\u50A8\u4EE4\u724C\uFF0C\u8BBE\u7F6E30\u5206\u949F\u8FC7\u671F\n  const expiresAt = Date.now() + 30 * 60 * 1000;\n  csrfTokens.set(ip, { token, expiresAt });\n  \n  // \u6E05\u7406\u8FC7\u671F\u4EE4\u724C\n  cleanExpiredTokens();\n  \n  return successResponse({ csrfToken: token });\n}\n\n// \u9A8C\u8BC1CSRF\u4EE4\u724C\nfunction validateCSRFToken(request, token) {\n  if (!token) return false;\n  \n  const ip = getClientIP(request);\n  const stored = csrfTokens.get(ip);\n  \n  if (!stored || Date.now() > stored.expiresAt) {\n    return false;\n  }\n  \n  return stored.token === token;\n}\n\n// \u6E05\u7406\u8FC7\u671F\u4EE4\u724C\nfunction cleanExpiredTokens() {\n  const now = Date.now();\n  for (const [ip, data] of csrfTokens.entries()) {\n    if (now > data.expiresAt) {\n      csrfTokens.delete(ip);\n    }\n  }\n}", "import { jsonResponse, errorResponse, successResponse } from '../utils/response.js';\n\nexport async function handleWhitelist(request, db, env) {\n  const url = new URL(request.url);\n  const method = request.method;\n\n  // \u68C0\u67E5\u7BA1\u7406\u5458\u6743\u9650\n  const authHeader = request.headers.get('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token || !db.isValidAdmin(token)) {\n    return errorResponse('\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650', 401);\n  }\n\n  try {\n    switch (method) {\n      case 'GET':\n        return await getWhitelist(db);\n      case 'POST':\n        return await addToWhitelist(request, db);\n      case 'DELETE':\n        return await removeFromWhitelist(request, db);\n      default:\n        return errorResponse('\u4E0D\u652F\u6301\u7684\u8BF7\u6C42\u65B9\u6CD5', 405);\n    }\n  } catch (error) {\n    console.error('Whitelist API Error:', error);\n    return errorResponse('\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF', 500);\n  }\n}\n\nasync function getWhitelist(db) {\n  try {\n    const whitelist = await db.getWhitelist();\n    return successResponse({ whitelist });\n  } catch (error) {\n    console.error('Get whitelist error:', error);\n    return errorResponse('\u83B7\u53D6\u767D\u540D\u5355\u5931\u8D25');\n  }\n}\n\nasync function addToWhitelist(request, db) {\n  try {\n    const data = await request.json();\n    const { domain, description } = data;\n\n    if (!domain) {\n      return errorResponse('\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A');\n    }\n\n    await db.addToWhitelist(domain, description);\n    return successResponse(null, '\u6DFB\u52A0\u6210\u529F');\n  } catch (error) {\n    console.error('Add to whitelist error:', error);\n    return errorResponse('\u6DFB\u52A0\u5931\u8D25');\n  }\n}\n\nasync function removeFromWhitelist(request, db) {\n  try {\n    const url = new URL(request.url);\n    const pathParts = url.pathname.split('/');\n    const id = pathParts[pathParts.length - 1];\n\n    if (!id || isNaN(id)) {\n      return errorResponse('\u65E0\u6548\u7684ID');\n    }\n\n    await db.removeFromWhitelist(parseInt(id));\n    return successResponse(null, '\u5220\u9664\u6210\u529F');\n  } catch (error) {\n    console.error('Remove from whitelist error:', error);\n    return errorResponse('\u5220\u9664\u5931\u8D25');\n  }\n}", "import { DatabaseService } from './database/db.js';\nimport { handleComments } from './handlers/comments.js';\nimport { handleWhitelist } from './handlers/whitelist.js';\nimport { corsResponse, htmlResponse, jsonResponse } from './utils/response.js';\n\nexport default {\n  async fetch(request, env, ctx) {\n    const url = new URL(request.url);\n    const db = new DatabaseService(env.DB);\n    db.setAdminToken(env.ADMIN_TOKEN);\n\n    // \u5904\u7406CORS\u9884\u68C0\u8BF7\u6C42\n    if (request.method === 'OPTIONS') {\n      return corsResponse();\n    }\n\n    // \u8DEF\u7531\u5904\u7406\n    if (url.pathname.startsWith('/api/comments')) {\n      return handleComments(request, db, env);\n    }\n\n    // \u767D\u540D\u5355\u7BA1\u7406\n    if (url.pathname.startsWith('/api/whitelist')) {\n      return handleWhitelist(request, db, env);\n    }\n\n    // \u7BA1\u7406\u9762\u677F\n    if (url.pathname === '/admin') {\n      return serveAdminPanel(env);\n    }\n\n    // \u6D4B\u8BD5\u8DEF\u7531 - \u68C0\u67E5\u6570\u636E\u5E93\u8FDE\u63A5\n    if (url.pathname === '/api/test') {\n      try {\n        const testQuery = await db.db.prepare('SELECT 1 as test').first();\n        return jsonResponse({ status: 'ok', database: 'connected', test: testQuery });\n      } catch (error) {\n        return jsonResponse({ status: 'error', message: error.message }, 500);\n      }\n    }\n\n    // \u63D0\u4F9B\u5D4C\u5165\u5F0FJS\u6587\u4EF6\n    if (url.pathname === '/embed.js') {\n      return serveEmbedScript(request, env);\n    }\n\n    // \u63D0\u4F9BCSS\u6587\u4EF6\n    if (url.pathname === '/embed.css') {\n      return serveEmbedCSS();\n    }\n\n    // \u9ED8\u8BA4\u9996\u9875 - \u663E\u793A\u90E8\u7F72\u6210\u529F\u4FE1\u606F\n    return serveHomePage(env);\n  }\n};\n\nasync function serveHomePage(env) {\n  const html = `\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>lzreview \u8BC4\u8BBA\u7CFB\u7EDF</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 2rem;\n            line-height: 1.6;\n            color: #333;\n        }\n        .success {\n            background: #d4edda;\n            color: #155724;\n            padding: 1rem;\n            border-radius: 8px;\n            margin-bottom: 2rem;\n            border: 1px solid #c3e6cb;\n        }\n        .test-section {\n            background: #fff3cd;\n            color: #856404;\n            padding: 1rem;\n            border-radius: 8px;\n            margin: 2rem 0;\n            border: 1px solid #ffeaa7;\n        }\n        .code {\n            background: #f8f9fa;\n            padding: 1rem;\n            border-radius: 6px;\n            border: 1px solid #e9ecef;\n            font-family: 'Monaco', 'Menlo', monospace;\n            overflow-x: auto;\n        }\n        h1 { color: #2c3e50; }\n        h2 { color: #34495e; margin-top: 2rem; }\n        .footer {\n            margin-top: 3rem;\n            padding-top: 2rem;\n            border-top: 1px solid #eee;\n            text-align: center;\n            color: #666;\n        }\n        .nav-tabs {\n            border-bottom: 2px solid #dee2e6;\n            margin-bottom: 2rem;\n        }\n        .nav-tab {\n            display: inline-block;\n            padding: 0.5rem 1rem;\n            margin-right: 1rem;\n            background: #f8f9fa;\n            border: 1px solid #dee2e6;\n            border-bottom: none;\n            border-radius: 8px 8px 0 0;\n            cursor: pointer;\n            text-decoration: none;\n            color: #495057;\n        }\n        .nav-tab.active {\n            background: #fff;\n            color: #007bff;\n            border-bottom: 2px solid #fff;\n            margin-bottom: -2px;\n        }\n        .tab-content {\n            display: none;\n        }\n        .tab-content.active {\n            display: block;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"success\">\n        <h2>\uD83C\uDF89 \u606D\u559C\u4F60\uFF0Clzreview \u8BC4\u8BBA\u7CFB\u7EDF\u5DF2\u90E8\u7F72\u6210\u529F\uFF01</h2>\n        <p>\u4F60\u73B0\u5728\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u7684\u65B9\u5F0F\u4E3A\u4F60\u7684\u9759\u6001\u7F51\u7AD9\u6DFB\u52A0\u8BC4\u8BBA\u529F\u80FD\u3002</p>\n    </div>\n\n    <h1>lzreview \u8BC4\u8BBA\u7CFB\u7EDF</h1>\n    \n    <div class=\"nav-tabs\">\n        <a href=\"#\" class=\"nav-tab active\" onclick=\"showTab('test')\">\uD83D\uDCDD \u8BC4\u8BBA\u6D4B\u8BD5</a>\n        <a href=\"#\" class=\"nav-tab\" onclick=\"showTab('guide')\">\uD83D\uDCD6 \u4F7F\u7528\u6307\u5357</a>\n        <a href=\"#\" class=\"nav-tab\" onclick=\"showTab('api')\">\uD83D\uDD27 API\u6587\u6863</a>\n    </div>\n\n    <div id=\"test-content\" class=\"tab-content active\">\n        <div class=\"test-section\">\n            <h2>\uD83E\uDDEA \u8BC4\u8BBA\u529F\u80FD\u6D4B\u8BD5</h2>\n            <p>\u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u76F4\u63A5\u6D4B\u8BD5\u8BC4\u8BBA\u7CFB\u7EDF\u7684\u529F\u80FD\uFF0C\u8BD5\u8BD5\u53D1\u5E03\u4E00\u6761\u8BC4\u8BBA\u5427\uFF01</p>\n            <button onclick=\"testDatabase()\" style=\"margin-bottom: 1rem; padding: 0.5rem 1rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;\">\n                \uD83D\uDD27 \u6D4B\u8BD5\u6570\u636E\u5E93\u8FDE\u63A5\n            </button>\n            <div id=\"test-result\" style=\"margin-bottom: 1rem;\"></div>\n        </div>\n        \n        <!-- \u8BC4\u8BBA\u6D4B\u8BD5\u5BB9\u5668 -->\n        <div id=\"lzreview-comments\"></div>\n    </div>\n\n    <div id=\"guide-content\" class=\"tab-content\">\n        <h2>\uD83D\uDE80 \u5FEB\u901F\u96C6\u6210</h2>\n        <p>\u5728\u4F60\u7684\u7F51\u9875\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u4EE3\u7801\u5373\u53EF\u542F\u7528\u8BC4\u8BBA\u529F\u80FD\uFF1A</p>\n\n        <div class=\"code\">\n&lt;!-- \u8BC4\u8BBA\u5BB9\u5668 --&gt;\n&lt;div id=\"lzreview-comments\"&gt;&lt;/div&gt;\n\n&lt;!-- \u5F15\u5165\u8BC4\u8BBA\u7CFB\u7EDF --&gt;\n&lt;script&gt;\nwindow.lzreviewConfig = {\n    apiUrl: '${env.SITE_URL || 'your-worker-url.workers.dev'}',\n    pageUrl: window.location.href,\n    placeholder: '\u8BF4\u70B9\u4EC0\u4E48\u5427...'\n};\n&lt;/script&gt;\n&lt;script src=\"${env.SITE_URL || 'your-worker-url.workers.dev'}/embed.js\"&gt;&lt;/script&gt;\n        </div>\n\n        <h2>\u2699\uFE0F \u914D\u7F6E\u9009\u9879</h2>\n        <p>\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>window.lzreviewConfig</code> \u5BF9\u8C61\u81EA\u5B9A\u4E49\u8BC4\u8BBA\u7CFB\u7EDF\uFF1A</p>\n        \n        <div class=\"code\">\nwindow.lzreviewConfig = {\n    apiUrl: '\u4F60\u7684Worker\u57DF\u540D',           // \u5FC5\u586B\uFF1AAPI\u5730\u5740\n    pageUrl: window.location.href,     // \u5FC5\u586B\uFF1A\u5F53\u524D\u9875\u9762URL\n    placeholder: '\u8BF4\u70B9\u4EC0\u4E48\u5427...',      // \u53EF\u9009\uFF1A\u8BC4\u8BBA\u6846\u5360\u4F4D\u7B26\n    maxLength: 1000,                   // \u53EF\u9009\uFF1A\u8BC4\u8BBA\u6700\u5927\u957F\u5EA6\n    requireName: true,                 // \u53EF\u9009\uFF1A\u662F\u5426\u5FC5\u987B\u586B\u5199\u59D3\u540D\n    requireEmail: false                // \u53EF\u9009\uFF1A\u662F\u5426\u5FC5\u987B\u586B\u5199\u90AE\u7BB1\n};\n        </div>\n    </div>\n\n    <div id=\"api-content\" class=\"tab-content\">\n        <h2>\uD83D\uDEE0 \u7BA1\u7406\u529F\u80FD</h2>\n        <p>\u4F7F\u7528\u7BA1\u7406\u5458\u4EE4\u724C\u53EF\u4EE5\u5220\u9664\u8BC4\u8BBA\uFF1A</p>\n        <div class=\"code\">\nDELETE /api/comments/{id}\nAuthorization: Bearer your-admin-token\n        </div>\n\n        <h2>\uD83D\uDCCA \u7CFB\u7EDF\u4FE1\u606F</h2>\n        <ul>\n            <li><strong>\u7248\u672C\uFF1A</strong>1.0.0</li>\n            <li><strong>\u6570\u636E\u5E93\uFF1A</strong>Cloudflare D1</li>\n            <li><strong>\u8FD0\u884C\u65F6\uFF1A</strong>Cloudflare Workers</li>\n            <li><strong>\u90E8\u7F72\u72B6\u6001\uFF1A</strong><span style=\"color: #28a745;\">\u2705 \u6B63\u5E38\u8FD0\u884C</span></li>\n        </ul>\n    </div>\n\n    <div class=\"footer\">\n        <p>\uD83D\uDD27 Powered by <strong>lzreview</strong> - \u8F7B\u91CF\u7EA7\u9759\u6001\u7F51\u7AD9\u8BC4\u8BBA\u7CFB\u7EDF</p>\n    </div>\n\n    <script>\n        // \u6807\u7B7E\u9875\u5207\u6362\u529F\u80FD\n        function showTab(tabName) {\n            // \u9690\u85CF\u6240\u6709\u6807\u7B7E\u9875\u5185\u5BB9\n            document.querySelectorAll('.tab-content').forEach(content => {\n                content.classList.remove('active');\n            });\n            \n            // \u79FB\u9664\u6240\u6709\u6807\u7B7E\u9875\u6FC0\u6D3B\u72B6\u6001\n            document.querySelectorAll('.nav-tab').forEach(tab => {\n                tab.classList.remove('active');\n            });\n            \n            // \u663E\u793A\u9009\u4E2D\u7684\u6807\u7B7E\u9875\u5185\u5BB9\n            document.getElementById(tabName + '-content').classList.add('active');\n            \n            // \u6FC0\u6D3B\u9009\u4E2D\u7684\u6807\u7B7E\u9875\n            event.target.classList.add('active');\n        }\n\n        // \u6D4B\u8BD5\u6570\u636E\u5E93\u8FDE\u63A5\n        async function testDatabase() {\n            const resultDiv = document.getElementById('test-result');\n            resultDiv.innerHTML = '<p style=\"color: #666;\">\u6B63\u5728\u6D4B\u8BD5\u6570\u636E\u5E93\u8FDE\u63A5...</p>';\n            \n            try {\n                const response = await fetch('/api/test');\n                const data = await response.json();\n                \n                if (data.status === 'ok') {\n                    resultDiv.innerHTML = '<p style=\"color: #28a745;\">\u2705 \u6570\u636E\u5E93\u8FDE\u63A5\u6210\u529F\uFF01</p>';\n                } else {\n                    resultDiv.innerHTML = \\`<p style=\"color: #dc3545;\">\u274C \u6570\u636E\u5E93\u8FDE\u63A5\u5931\u8D25\uFF1A\\${data.message}</p>\\`;\n                }\n            } catch (error) {\n                resultDiv.innerHTML = \\`<p style=\"color: #dc3545;\">\u274C \u6D4B\u8BD5\u5931\u8D25\uFF1A\\${error.message}</p>\\`;\n            }\n        }\n\n        // \u521D\u59CB\u5316\u8BC4\u8BBA\u7CFB\u7EDF\uFF08\u4EC5\u5728\u6D4B\u8BD5\u6807\u7B7E\u9875\uFF09\n        window.lzreviewConfig = {\n            apiUrl: window.location.origin,\n            pageUrl: window.location.origin + '/#test',\n            placeholder: '\u5728\u8FD9\u91CC\u6D4B\u8BD5\u8BC4\u8BBA\u529F\u80FD\uFF0C\u8BD5\u8BD5\u53D1\u5E03\u4E00\u6761\u8BC4\u8BBA\u5427\uFF01',\n            maxLength: 1000,\n            requireName: true,\n            requireEmail: false\n        };\n    </script>\n    \n    <!-- \u52A0\u8F7D\u8BC4\u8BBA\u7CFB\u7EDF -->\n    <script src=\"/embed.js\"></script>\n</body>\n</html>`;\n\n  return htmlResponse(html);\n}\n\nasync function serveEmbedScript(request, env) {\n  const embedScript = await import('./web/embed.js');\n  const script = embedScript.default.replace('{{API_URL}}', env.SITE_URL || new URL(request.url).origin);\n  \n  return new Response(script, {\n    headers: {\n      'Content-Type': 'application/javascript',\n      'Cache-Control': 'public, max-age=3600'\n    }\n  });\n}\n\nasync function serveEmbedCSS() {\n  const embedCSS = await import('./web/embed.css');\n  \n  return new Response(embedCSS.default, {\n    headers: {\n      'Content-Type': 'text/css',\n      'Cache-Control': 'public, max-age=3600'\n    }\n  });\n}\n\nasync function serveAdminPanel(env) {\n  const html = `\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>lzreview \u7BA1\u7406\u9762\u677F</title>\n    <style>\n        * {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n        }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n            background: #f5f5f5;\n            color: #333;\n            line-height: 1.6;\n        }\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n            padding: 20px;\n        }\n        .header {\n            background: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            margin-bottom: 20px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n        .login-section {\n            background: #fff;\n            padding: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n            max-width: 400px;\n            margin: 50px auto;\n        }\n        .admin-section {\n            display: none;\n        }\n        .tabs {\n            display: flex;\n            background: #fff;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            margin-bottom: 20px;\n            overflow: hidden;\n        }\n        .tab {\n            flex: 1;\n            padding: 15px 20px;\n            background: #f8f9fa;\n            border: none;\n            cursor: pointer;\n            border-right: 1px solid #dee2e6;\n            font-size: 14px;\n            font-weight: 500;\n        }\n        .tab:last-child { border-right: none; }\n        .tab.active {\n            background: #007cba;\n            color: white;\n        }\n        .tab-content {\n            display: none;\n        }\n        .tab-content.active {\n            display: block;\n        }\n        .form-group {\n            margin-bottom: 20px;\n            text-align: left;\n        }\n        .form-label {\n            display: block;\n            margin-bottom: 5px;\n            font-weight: 500;\n            color: #555;\n        }\n        .form-input, .form-select {\n            width: 100%;\n            padding: 12px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            font-size: 14px;\n        }\n        .btn {\n            background: #007cba;\n            color: white;\n            padding: 12px 24px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 500;\n            margin-right: 10px;\n        }\n        .btn:hover { background: #005a87; }\n        .btn-danger {\n            background: #dc3545;\n            padding: 8px 16px;\n            font-size: 12px;\n        }\n        .btn-danger:hover { background: #c82333; }\n        .btn-success {\n            background: #28a745;\n        }\n        .btn-success:hover { background: #218838; }\n        .alert {\n            padding: 12px;\n            border-radius: 4px;\n            margin-bottom: 20px;\n        }\n        .alert-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n        .alert-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n        .card {\n            background: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            margin-bottom: 20px;\n        }\n        .stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .stat-card {\n            background: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .stat-number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #007cba;\n        }\n        .stat-label {\n            color: #666;\n            margin-top: 5px;\n        }\n        .page-list {\n            display: grid;\n            gap: 20px;\n        }\n        .page-item {\n            background: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            border-left: 4px solid #007cba;\n        }\n        .page-title {\n            font-size: 18px;\n            font-weight: 600;\n            margin-bottom: 10px;\n            color: #333;\n        }\n        .page-url {\n            color: #666;\n            font-size: 14px;\n            margin-bottom: 10px;\n            word-break: break-all;\n        }\n        .page-stats {\n            display: flex;\n            gap: 20px;\n            margin-bottom: 15px;\n        }\n        .page-stat {\n            color: #666;\n            font-size: 14px;\n        }\n        .page-actions {\n            display: flex;\n            gap: 10px;\n        }\n        .comments-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n        }\n        .comments-table th,\n        .comments-table td {\n            padding: 12px;\n            text-align: left;\n            border-bottom: 1px solid #ddd;\n        }\n        .comments-table th {\n            background: #f8f9fa;\n            font-weight: 500;\n        }\n        .comment-content {\n            max-width: 300px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n        .batch-actions {\n            margin-bottom: 20px;\n            padding: 15px;\n            background: #f8f9fa;\n            border-radius: 4px;\n        }\n        .whitelist-item {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 15px;\n            background: #f8f9fa;\n            border-radius: 4px;\n            margin-bottom: 10px;\n        }\n        .loading {\n            text-align: center;\n            padding: 20px;\n            color: #666;\n        }\n        .modal {\n            display: none;\n            position: fixed;\n            z-index: 1000;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0,0,0,0.4);\n        }\n        .modal-content {\n            background-color: #fefefe;\n            margin: 15% auto;\n            padding: 20px;\n            border-radius: 8px;\n            width: 80%;\n            max-width: 500px;\n        }\n        .close {\n            color: #aaa;\n            float: right;\n            font-size: 28px;\n            font-weight: bold;\n            cursor: pointer;\n        }\n        .close:hover { color: black; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <div>\n                <h1>\uD83D\uDEE0 lzreview \u7BA1\u7406\u9762\u677F</h1>\n                <p>\u7BA1\u7406\u60A8\u7684\u8BC4\u8BBA\u7CFB\u7EDF</p>\n            </div>\n            <button id=\"logout-btn\" class=\"btn btn-danger\" style=\"display: none;\">\u9000\u51FA\u767B\u5F55</button>\n        </div>\n\n        <div id=\"login-section\" class=\"login-section\">\n            <h2>\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5BC6\u94A5</h2>\n            <div id=\"login-message\"></div>\n            <form id=\"login-form\">\n                <div class=\"form-group\">\n                    <label class=\"form-label\" for=\"admin-token\">\u7BA1\u7406\u5458\u5BC6\u94A5</label>\n                    <input type=\"password\" id=\"admin-token\" class=\"form-input\" placeholder=\"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5BC6\u94A5\" required>\n                </div>\n                <button type=\"submit\" class=\"btn\">\u767B\u5F55</button>\n            </form>\n        </div>\n\n        <div id=\"admin-section\" class=\"admin-section\">\n            <div class=\"stats\" id=\"stats-section\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-comments\">-</div>\n                    <div class=\"stat-label\">\u603B\u8BC4\u8BBA\u6570</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"today-comments\">-</div>\n                    <div class=\"stat-label\">\u4ECA\u65E5\u8BC4\u8BBA</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-pages\">-</div>\n                    <div class=\"stat-label\">\u9875\u9762\u6570\u91CF</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"whitelist-count\">-</div>\n                    <div class=\"stat-label\">\u767D\u540D\u5355\u6570\u91CF</div>\n                </div>\n            </div>\n\n            <div class=\"tabs\">\n                <button class=\"tab active\" onclick=\"showTab('pages')\">\u9875\u9762\u7BA1\u7406</button>\n                <button class=\"tab\" onclick=\"showTab('comments')\">\u8BC4\u8BBA\u7BA1\u7406</button>\n                <button class=\"tab\" onclick=\"showTab('whitelist')\">\u767D\u540D\u5355\u7BA1\u7406</button>\n            </div>\n\n            <div id=\"pages-content\" class=\"tab-content active\">\n                <div class=\"card\">\n                    <h3>\u9875\u9762\u7BA1\u7406</h3>\n                    <div id=\"admin-message\"></div>\n                    <div id=\"pages-loading\" class=\"loading\">\u6B63\u5728\u52A0\u8F7D\u9875\u9762...</div>\n                    <div id=\"pages-list\" class=\"page-list\"></div>\n                </div>\n            </div>\n\n            <div id=\"comments-content\" class=\"tab-content\">\n                <div class=\"card\">\n                    <h3>\u8BC4\u8BBA\u7BA1\u7406</h3>\n                    <div class=\"batch-actions\">\n                        <input type=\"checkbox\" id=\"select-all\" onchange=\"toggleSelectAll()\">\n                        <label for=\"select-all\">\u5168\u9009</label>\n                        <button class=\"btn btn-danger\" onclick=\"batchDelete()\">\u6279\u91CF\u5220\u9664</button>\n                        <select id=\"page-filter\" class=\"form-select\" onchange=\"filterComments()\" style=\"width: 300px; display: inline-block;\">\n                            <option value=\"\">\u6240\u6709\u9875\u9762</option>\n                        </select>\n                    </div>\n                    <div id=\"comments-loading\" class=\"loading\">\u6B63\u5728\u52A0\u8F7D\u8BC4\u8BBA...</div>\n                    <table id=\"comments-table\" class=\"comments-table\" style=\"display: none;\">\n                        <thead>\n                            <tr>\n                                <th width=\"50\">\u9009\u62E9</th>\n                                <th>ID</th>\n                                <th>\u9875\u9762</th>\n                                <th>\u4F5C\u8005</th>\n                                <th>\u5185\u5BB9</th>\n                                <th>\u65F6\u95F4</th>\n                                <th>\u64CD\u4F5C</th>\n                            </tr>\n                        </thead>\n                        <tbody id=\"comments-tbody\">\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <div id=\"whitelist-content\" class=\"tab-content\">\n                <div class=\"card\">\n                    <h3>\u767D\u540D\u5355\u7BA1\u7406</h3>\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-success\" onclick=\"showAddWhitelistModal()\">\u6DFB\u52A0\u57DF\u540D</button>\n                    </div>\n                    <div id=\"whitelist-loading\" class=\"loading\">\u6B63\u5728\u52A0\u8F7D\u767D\u540D\u5355...</div>\n                    <div id=\"whitelist-list\"></div>\n                </div>\n            </div>\n        </div>\n\n        <!-- \u6DFB\u52A0\u767D\u540D\u5355\u6A21\u6001\u6846 -->\n        <div id=\"whitelist-modal\" class=\"modal\">\n            <div class=\"modal-content\">\n                <span class=\"close\" onclick=\"closeModal()\">&times;</span>\n                <h3>\u6DFB\u52A0\u57DF\u540D\u5230\u767D\u540D\u5355</h3>\n                <form id=\"whitelist-form\">\n                    <div class=\"form-group\">\n                        <label class=\"form-label\" for=\"domain\">\u57DF\u540D</label>\n                        <input type=\"text\" id=\"domain\" class=\"form-input\" placeholder=\"example.com\" required>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\" for=\"description\">\u63CF\u8FF0</label>\n                        <input type=\"text\" id=\"description\" class=\"form-input\" placeholder=\"\u53EF\u9009\u63CF\u8FF0\">\n                    </div>\n                    <button type=\"submit\" class=\"btn\">\u6DFB\u52A0</button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        let adminToken = '';\n        let allComments = [];\n        let currentPageUrl = '';\n        const apiUrl = window.location.origin;\n\n        // \u767B\u5F55\u5904\u7406\n        document.getElementById('login-form').addEventListener('submit', async (e) => {\n            e.preventDefault();\n            const token = document.getElementById('admin-token').value.trim();\n            \n            if (!token) {\n                showLoginMessage('\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5BC6\u94A5', 'error');\n                return;\n            }\n\n            adminToken = token;\n            \n            try {\n                await loadStats();\n                document.getElementById('login-section').style.display = 'none';\n                document.getElementById('admin-section').style.display = 'block';\n                document.getElementById('logout-btn').style.display = 'block';\n                await loadPages();\n            } catch (error) {\n                showLoginMessage('\u5BC6\u94A5\u9A8C\u8BC1\u5931\u8D25', 'error');\n                adminToken = '';\n            }\n        });\n\n        // \u9000\u51FA\u767B\u5F55\n        document.getElementById('logout-btn').addEventListener('click', () => {\n            adminToken = '';\n            document.getElementById('login-section').style.display = 'block';\n            document.getElementById('admin-section').style.display = 'none';\n            document.getElementById('logout-btn').style.display = 'none';\n            document.getElementById('admin-token').value = '';\n        });\n\n        function showTab(tabName) {\n            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));\n            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));\n            \n            event.target.classList.add('active');\n            document.getElementById(tabName + '-content').classList.add('active');\n            \n            if (tabName === 'comments') {\n                loadComments();\n            } else if (tabName === 'whitelist') {\n                loadWhitelist();\n            }\n        }\n\n        function showLoginMessage(message, type) {\n            const messageEl = document.getElementById('login-message');\n            messageEl.innerHTML = \\`<div class=\"alert alert-\\${type}\">\\${message}</div>\\`;\n        }\n\n        function showAdminMessage(message, type) {\n            const messageEl = document.getElementById('admin-message');\n            messageEl.innerHTML = \\`<div class=\"alert alert-\\${type}\">\\${message}</div>\\`;\n            setTimeout(() => messageEl.innerHTML = '', 3000);\n        }\n\n        async function loadStats() {\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/comments/stats\\`, {\n                    headers: { 'Authorization': \\`Bearer \\${adminToken}\\` }\n                });\n                \n                if (!response.ok) throw new Error('Unauthorized');\n                \n                const data = await response.json();\n                document.getElementById('total-comments').textContent = data.data.total || 0;\n                document.getElementById('today-comments').textContent = data.data.today || 0;\n                document.getElementById('total-pages').textContent = data.data.pages || 0;\n                document.getElementById('whitelist-count').textContent = data.data.whitelist || 0;\n            } catch (error) {\n                throw error;\n            }\n        }\n\n        async function loadPages() {\n            const loadingEl = document.getElementById('pages-loading');\n            const listEl = document.getElementById('pages-list');\n            \n            loadingEl.style.display = 'block';\n            listEl.innerHTML = '';\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/comments/pages\\`, {\n                    headers: { 'Authorization': \\`Bearer \\${adminToken}\\` }\n                });\n\n                if (!response.ok) throw new Error('Unauthorized');\n\n                const data = await response.json();\n                const pages = data.data.pages;\n                \n                listEl.innerHTML = pages.map(page => \\`\n                    <div class=\"page-item\">\n                        <div class=\"page-title\">\\${page.title || '\u65E0\u6807\u9898'}</div>\n                        <div class=\"page-url\">\\${page.page_url}</div>\n                        <div class=\"page-stats\">\n                            <span class=\"page-stat\">\u8BC4\u8BBA\u6570: \\${page.comment_count}</span>\n                            <span class=\"page-stat\">\u6700\u65B0: \\${formatDate(page.latest_comment)}</span>\n                        </div>\n                        <div class=\"page-actions\">\n                            <button class=\"btn\" onclick=\"viewPageComments('\\${page.page_url}')\">\u67E5\u770B\u8BC4\u8BBA</button>\n                            <button class=\"btn btn-danger\" onclick=\"deletePageComments('\\${page.page_url}')\">\u5220\u9664\u6240\u6709\u8BC4\u8BBA</button>\n                        </div>\n                    </div>\n                \\`).join('');\n\n                loadingEl.style.display = 'none';\n            } catch (error) {\n                loadingEl.style.display = 'none';\n                showAdminMessage('\u52A0\u8F7D\u9875\u9762\u5931\u8D25', 'error');\n            }\n        }\n\n        async function loadComments() {\n            const loadingEl = document.getElementById('comments-loading');\n            const tableEl = document.getElementById('comments-table');\n            \n            loadingEl.style.display = 'block';\n            tableEl.style.display = 'none';\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/comments/all\\`, {\n                    headers: { 'Authorization': \\`Bearer \\${adminToken}\\` }\n                });\n\n                if (!response.ok) throw new Error('Unauthorized');\n\n                const data = await response.json();\n                allComments = data.data.comments;\n                \n                // \u586B\u5145\u9875\u9762\u8FC7\u6EE4\u5668\n                const pageFilter = document.getElementById('page-filter');\n                const pages = [...new Set(allComments.map(c => c.page_url))];\n                pageFilter.innerHTML = '<option value=\"\">\u6240\u6709\u9875\u9762</option>' + \n                    pages.map(url => \\`<option value=\"\\${url}\">\\${truncate(url, 50)}</option>\\`).join('');\n                \n                renderComments(allComments);\n                loadingEl.style.display = 'none';\n                tableEl.style.display = 'table';\n            } catch (error) {\n                loadingEl.style.display = 'none';\n                showAdminMessage('\u52A0\u8F7D\u8BC4\u8BBA\u5931\u8D25', 'error');\n            }\n        }\n\n        function renderComments(comments) {\n            const tbody = document.getElementById('comments-tbody');\n            tbody.innerHTML = comments.map(comment => \\`\n                <tr>\n                    <td><input type=\"checkbox\" class=\"comment-checkbox\" value=\"\\${comment.id}\"></td>\n                    <td>\\${comment.id}</td>\n                    <td title=\"\\${comment.page_url}\">\\${truncate(comment.page_url, 30)}</td>\n                    <td>\\${comment.author_name}</td>\n                    <td class=\"comment-content\" title=\"\\${comment.content}\">\\${truncate(comment.content, 50)}</td>\n                    <td>\\${formatDate(comment.created_at)}</td>\n                    <td>\n                        <button class=\"btn btn-danger\" onclick=\"deleteComment(\\${comment.id})\">\u5220\u9664</button>\n                    </td>\n                </tr>\n            \\`).join('');\n        }\n\n        function viewPageComments(pageUrl) {\n            currentPageUrl = pageUrl;\n            document.getElementById('page-filter').value = pageUrl;\n            showTab('comments');\n            filterComments();\n        }\n\n        function filterComments() {\n            const pageUrl = document.getElementById('page-filter').value;\n            const filteredComments = pageUrl ? allComments.filter(c => c.page_url === pageUrl) : allComments;\n            renderComments(filteredComments);\n        }\n\n        function toggleSelectAll() {\n            const selectAll = document.getElementById('select-all');\n            const checkboxes = document.querySelectorAll('.comment-checkbox');\n            checkboxes.forEach(checkbox => checkbox.checked = selectAll.checked);\n        }\n\n        async function batchDelete() {\n            const selectedIds = Array.from(document.querySelectorAll('.comment-checkbox:checked')).map(cb => cb.value);\n            \n            if (selectedIds.length === 0) {\n                showAdminMessage('\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u8BC4\u8BBA', 'error');\n                return;\n            }\n\n            if (!confirm(\\`\u786E\u5B9A\u8981\u5220\u9664 \\${selectedIds.length} \u6761\u8BC4\u8BBA\u5417\uFF1F\\`)) {\n                return;\n            }\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/comments/batch\\`, {\n                    method: 'DELETE',\n                    headers: {\n                        'Authorization': \\`Bearer \\${adminToken}\\`,\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ ids: selectedIds })\n                });\n\n                const data = await response.json();\n                if (data.success) {\n                    showAdminMessage('\u6279\u91CF\u5220\u9664\u6210\u529F', 'success');\n                    await loadComments();\n                    await loadStats();\n                } else {\n                    showAdminMessage(data.message || '\u6279\u91CF\u5220\u9664\u5931\u8D25', 'error');\n                }\n            } catch (error) {\n                showAdminMessage('\u6279\u91CF\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n\n        async function deleteComment(commentId) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u8BC4\u8BBA\u5417\uFF1F')) return;\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/comments/\\${commentId}\\`, {\n                    method: 'DELETE',\n                    headers: { 'Authorization': \\`Bearer \\${adminToken}\\` }\n                });\n\n                const data = await response.json();\n                if (data.success) {\n                    showAdminMessage('\u8BC4\u8BBA\u5220\u9664\u6210\u529F', 'success');\n                    await loadComments();\n                    await loadStats();\n                } else {\n                    showAdminMessage(data.message || '\u5220\u9664\u5931\u8D25', 'error');\n                }\n            } catch (error) {\n                showAdminMessage('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n\n        async function deletePageComments(pageUrl) {\n            if (!confirm(\\`\u786E\u5B9A\u8981\u5220\u9664\u9875\u9762 \"\\${pageUrl}\" \u7684\u6240\u6709\u8BC4\u8BBA\u5417\uFF1F\\`)) return;\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/comments/page\\`, {\n                    method: 'DELETE',\n                    headers: {\n                        'Authorization': \\`Bearer \\${adminToken}\\`,\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ pageUrl })\n                });\n\n                const data = await response.json();\n                if (data.success) {\n                    showAdminMessage('\u9875\u9762\u8BC4\u8BBA\u5220\u9664\u6210\u529F', 'success');\n                    await loadPages();\n                    await loadStats();\n                } else {\n                    showAdminMessage(data.message || '\u5220\u9664\u5931\u8D25', 'error');\n                }\n            } catch (error) {\n                showAdminMessage('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n\n        async function loadWhitelist() {\n            const loadingEl = document.getElementById('whitelist-loading');\n            const listEl = document.getElementById('whitelist-list');\n            \n            loadingEl.style.display = 'block';\n            listEl.innerHTML = '';\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/whitelist\\`, {\n                    headers: { 'Authorization': \\`Bearer \\${adminToken}\\` }\n                });\n\n                if (!response.ok) throw new Error('Unauthorized');\n\n                const data = await response.json();\n                const whitelist = data.data.whitelist;\n                \n                listEl.innerHTML = whitelist.map(item => \\`\n                    <div class=\"whitelist-item\">\n                        <div>\n                            <strong>\\${item.domain}</strong>\n                            \\${item.description ? \\`<br><small>\\${item.description}</small>\\` : ''}\n                        </div>\n                        <button class=\"btn btn-danger\" onclick=\"removeFromWhitelist(\\${item.id})\">\u5220\u9664</button>\n                    </div>\n                \\`).join('');\n\n                loadingEl.style.display = 'none';\n            } catch (error) {\n                loadingEl.style.display = 'none';\n                showAdminMessage('\u52A0\u8F7D\u767D\u540D\u5355\u5931\u8D25', 'error');\n            }\n        }\n\n        function showAddWhitelistModal() {\n            document.getElementById('whitelist-modal').style.display = 'block';\n        }\n\n        function closeModal() {\n            document.getElementById('whitelist-modal').style.display = 'none';\n        }\n\n        document.getElementById('whitelist-form').addEventListener('submit', async (e) => {\n            e.preventDefault();\n            const domain = document.getElementById('domain').value.trim();\n            const description = document.getElementById('description').value.trim();\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/whitelist\\`, {\n                    method: 'POST',\n                    headers: {\n                        'Authorization': \\`Bearer \\${adminToken}\\`,\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ domain, description })\n                });\n\n                const data = await response.json();\n                if (data.success) {\n                    showAdminMessage('\u6DFB\u52A0\u6210\u529F', 'success');\n                    closeModal();\n                    await loadWhitelist();\n                    await loadStats();\n                } else {\n                    showAdminMessage(data.message || '\u6DFB\u52A0\u5931\u8D25', 'error');\n                }\n            } catch (error) {\n                showAdminMessage('\u6DFB\u52A0\u5931\u8D25', 'error');\n            }\n        });\n\n        async function removeFromWhitelist(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u4ECE\u767D\u540D\u5355\u4E2D\u5220\u9664\u5417\uFF1F')) return;\n\n            try {\n                const response = await fetch(\\`\\${apiUrl}/api/whitelist/\\${id}\\`, {\n                    method: 'DELETE',\n                    headers: { 'Authorization': \\`Bearer \\${adminToken}\\` }\n                });\n\n                const data = await response.json();\n                if (data.success) {\n                    showAdminMessage('\u5220\u9664\u6210\u529F', 'success');\n                    await loadWhitelist();\n                    await loadStats();\n                } else {\n                    showAdminMessage(data.message || '\u5220\u9664\u5931\u8D25', 'error');\n                }\n            } catch (error) {\n                showAdminMessage('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n\n        function truncate(str, length) {\n            return str.length > length ? str.substring(0, length) + '...' : str;\n        }\n\n        function formatDate(dateString) {\n            if (!dateString) return '-';\n            const date = new Date(dateString.replace(' ', 'T'));\n            return date.toLocaleString('zh-CN');\n        }\n    </script>\n</body>\n</html>`;\n\n  return htmlResponse(html);\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA,IAAM,aAkuBC;AAluBP;AAAA;AAAA,IAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwvBb,SAAO,aAAa,IAAI;AAC1B;AA1vBe;",
  "names": ["cache", "embedScript"]
}
